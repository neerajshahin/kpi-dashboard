[2017-05-15 06:22:24.180] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 06:22:44.042] [DEBUG] AppRouter - AppRouter : req.cookie { _ga: 'GA1.1.1947238523.1494681848',
  _gid: 'GA1.1.1878199793.1494789075' }
[2017-05-15 06:22:44.058] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:22:44.059] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:22:46.315] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:22:59.358Z',
     createdOn: 1494829379358,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829379358,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:22:50.884] [DEBUG] AppRouter - AppRouter : req.cookie { _ga: 'GA1.1.1947238523.1494681848',
  _gid: 'GA1.1.1878199793.1494789075',
  party_id: '569' }
[2017-05-15 06:22:50.886] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:22:50.886] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:22:52.759] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:23:05.871Z',
     createdOn: 1494829385871,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829385871,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:24:06.367] [DEBUG] AppRouter - AppRouter : req.cookie { _ga: 'GA1.1.1947238523.1494681848',
  _gid: 'GA1.1.1878199793.1494789075',
  party_id: '569' }
[2017-05-15 06:24:06.370] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:24:06.372] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:24:08.515] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:24:21.645Z',
     createdOn: 1494829461645,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829461645,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:24:09.746] [DEBUG] AppRouter - inside callback
[2017-05-15 06:24:09.747] [DEBUG] Controller - Auth Code:  8e7db3587ac9f1792c14ba3532bca09c
[2017-05-15 06:24:09.748] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '8e7db3587ac9f1792c14ba3532bca09c',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 06:24:09.749] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 06:24:10.550] [DEBUG] Controller - after making call {"access_token":"49a829b640d6003e6270319845a3a1a3","token_type":"Bearer","expires_in":3600,"refresh_token":"7d8dda6115dca8472418ca86ee9b6b52","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDY0LCJpYXQiOjE0OTQ4Mjk0NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.LWVcIy13v3Aof3sO2zqvUV0e4a6rT6KjltZTHC1nJXw"}
[2017-05-15 06:24:10.568] [DEBUG] AppRouter - AppRouter : req.cookie { _ga: 'GA1.1.1947238523.1494681848',
  _gid: 'GA1.1.1878199793.1494789075',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDY0LCJpYXQiOjE0OTQ4Mjk0NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.LWVcIy13v3Aof3sO2zqvUV0e4a6rT6KjltZTHC1nJXw',
  _refresh_token: '7d8dda6115dca8472418ca86ee9b6b52' }
[2017-05-15 06:24:10.570] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDY0LCJpYXQiOjE0OTQ4Mjk0NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.LWVcIy13v3Aof3sO2zqvUV0e4a6rT6KjltZTHC1nJXw
[2017-05-15 06:24:10.571] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 06:24:12.180] [DEBUG] AppRouter - inside user router
[2017-05-15 06:24:12.181] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 06:24:12.182] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDY0LCJpYXQiOjE0OTQ4Mjk0NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.LWVcIy13v3Aof3sO2zqvUV0e4a6rT6KjltZTHC1nJXw
[2017-05-15 06:24:12.182] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494833064,
  iat: 1494829464,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 06:24:12.426] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-15 06:24:12.428] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:24:12.429] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:24:12.883] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-15 06:24:12.887] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:24:12.888] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:24:13.566] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:24:26.694Z',
     createdOn: 1494829466694,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829466694,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:24:13.826] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:24:26.947Z',
     createdOn: 1494829466947,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829466947,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:24:20.413] [DEBUG] AppRouter - inside callback
[2017-05-15 06:24:20.414] [DEBUG] Controller - Auth Code:  bbde6ee6a8035e03e08043e3344d8aad
[2017-05-15 06:24:20.414] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'bbde6ee6a8035e03e08043e3344d8aad',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 06:24:20.414] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 06:24:21.781] [DEBUG] Controller - after making call {"access_token":"e7b00194579dbbea033724c4a7118db5","token_type":"Bearer","expires_in":3600,"refresh_token":"61f3dfdda80214a3ed1a64c81236ffdd","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDc1LCJpYXQiOjE0OTQ4Mjk0NzUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.cS2utSjSAppJ6ssH7Tky5BiZixfy2T5QUAE_1q3PH9A"}
[2017-05-15 06:24:21.793] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDc1LCJpYXQiOjE0OTQ4Mjk0NzUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.cS2utSjSAppJ6ssH7Tky5BiZixfy2T5QUAE_1q3PH9A',
  _refresh_token: '61f3dfdda80214a3ed1a64c81236ffdd' }
[2017-05-15 06:24:21.795] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDc1LCJpYXQiOjE0OTQ4Mjk0NzUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.cS2utSjSAppJ6ssH7Tky5BiZixfy2T5QUAE_1q3PH9A
[2017-05-15 06:24:21.796] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 06:24:23.204] [DEBUG] AppRouter - inside user router
[2017-05-15 06:24:23.204] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 06:24:23.205] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDc1LCJpYXQiOjE0OTQ4Mjk0NzUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.cS2utSjSAppJ6ssH7Tky5BiZixfy2T5QUAE_1q3PH9A
[2017-05-15 06:24:23.210] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494833075,
  iat: 1494829475,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 06:24:23.369] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-15 06:24:23.379] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:24:23.379] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:24:23.557] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-15 06:24:23.559] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:24:23.559] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:24:24.256] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:24:37.350Z',
     createdOn: 1494829477350,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829477350,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:24:24.413] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:24:37.548Z',
     createdOn: 1494829477548,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829477548,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:24:29.756] [DEBUG] AppRouter - inside callback
[2017-05-15 06:24:29.757] [DEBUG] Controller - Auth Code:  35192e6fd4c8c9e9b7e396640d3a9358
[2017-05-15 06:24:29.757] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '35192e6fd4c8c9e9b7e396640d3a9358',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 06:24:29.757] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 06:24:31.154] [DEBUG] Controller - after making call {"access_token":"a96b44b2c6f1afd2b4f5783570f807b7","token_type":"Bearer","expires_in":3600,"refresh_token":"48ff7fc9a6df6e946592476a24145682","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDg0LCJpYXQiOjE0OTQ4Mjk0ODQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UZbU9HM2eQpUGJTuVRwBzVDlgyGmcg0OqLW_ApuegbA"}
[2017-05-15 06:24:31.164] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDg0LCJpYXQiOjE0OTQ4Mjk0ODQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UZbU9HM2eQpUGJTuVRwBzVDlgyGmcg0OqLW_ApuegbA',
  _refresh_token: '48ff7fc9a6df6e946592476a24145682' }
[2017-05-15 06:24:31.164] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDg0LCJpYXQiOjE0OTQ4Mjk0ODQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UZbU9HM2eQpUGJTuVRwBzVDlgyGmcg0OqLW_ApuegbA
[2017-05-15 06:24:31.165] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 06:24:32.783] [DEBUG] AppRouter - inside user router
[2017-05-15 06:24:32.785] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 06:24:32.785] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzMDg0LCJpYXQiOjE0OTQ4Mjk0ODQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UZbU9HM2eQpUGJTuVRwBzVDlgyGmcg0OqLW_ApuegbA
[2017-05-15 06:24:32.786] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494833084,
  iat: 1494829484,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 06:24:33.161] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-15 06:24:33.171] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:24:33.172] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:24:33.193] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-15 06:24:33.196] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:24:33.197] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:24:34.002] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:24:47.140Z',
     createdOn: 1494829487140,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829487140,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:24:34.045] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:24:47.188Z',
     createdOn: 1494829487188,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494829487188,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:35:49.420] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 06:35:54.436] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569' }
[2017-05-15 06:35:54.449] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:35:54.450] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:35:56.390] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:36:09.508Z',
     createdOn: 1494830169508,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494830169508,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:36:40.838] [DEBUG] AppRouter - inside callback
[2017-05-15 06:36:40.839] [DEBUG] Controller - Auth Code:  ec312a698834d31e91022fb252ac9220
[2017-05-15 06:36:40.840] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'ec312a698834d31e91022fb252ac9220',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 06:36:40.840] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 06:36:42.095] [DEBUG] Controller - after making call {"access_token":"52e6fd42e16cfe8b0e5638dc9edb35c5","token_type":"Bearer","expires_in":3600,"refresh_token":"7419900354fddfb3c400f8403f3ccc9d","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzODE1LCJpYXQiOjE0OTQ4MzAyMTUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.Pn4ERhp6bJUrqq7_Umve2f5D1NBk8jA6KORg83vMtKw"}
[2017-05-15 06:36:42.108] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzODE1LCJpYXQiOjE0OTQ4MzAyMTUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.Pn4ERhp6bJUrqq7_Umve2f5D1NBk8jA6KORg83vMtKw',
  _refresh_token: '7419900354fddfb3c400f8403f3ccc9d' }
[2017-05-15 06:36:42.109] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzODE1LCJpYXQiOjE0OTQ4MzAyMTUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.Pn4ERhp6bJUrqq7_Umve2f5D1NBk8jA6KORg83vMtKw
[2017-05-15 06:36:42.110] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 06:36:43.610] [DEBUG] AppRouter - inside user router
[2017-05-15 06:36:43.611] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 06:36:43.612] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODMzODE1LCJpYXQiOjE0OTQ4MzAyMTUsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.Pn4ERhp6bJUrqq7_Umve2f5D1NBk8jA6KORg83vMtKw
[2017-05-15 06:36:43.613] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494833815,
  iat: 1494830215,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 06:42:30.456] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 06:53:46.750] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 06:53:46.765] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:53:46.766] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:53:49.074] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:54:00.765Z',
     createdOn: 1494831240765,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494831240765,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:54:02.490] [DEBUG] AppRouter - inside callback
[2017-05-15 06:54:02.491] [DEBUG] Controller - Auth Code:  56c1b2e7ac2b40128e600d32b728c617
[2017-05-15 06:54:02.491] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '56c1b2e7ac2b40128e600d32b728c617',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 06:54:02.491] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 06:54:04.735] [DEBUG] Controller - after making call {"access_token":"9d2a8fa39d8548e526739961c04287ba","token_type":"Bearer","expires_in":3600,"refresh_token":"4bbf8177404bdb98b043432996cbdba1","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM0ODU2LCJpYXQiOjE0OTQ4MzEyNTYsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8OAB0F_NodNmLNX8mNvhWgjwJFN-nr8dRbTPV1HLcw8"}
[2017-05-15 06:54:04.746] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM0ODU2LCJpYXQiOjE0OTQ4MzEyNTYsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8OAB0F_NodNmLNX8mNvhWgjwJFN-nr8dRbTPV1HLcw8',
  _refresh_token: '4bbf8177404bdb98b043432996cbdba1' }
[2017-05-15 06:54:04.748] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM0ODU2LCJpYXQiOjE0OTQ4MzEyNTYsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8OAB0F_NodNmLNX8mNvhWgjwJFN-nr8dRbTPV1HLcw8
[2017-05-15 06:54:04.748] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 06:54:06.259] [DEBUG] AppRouter - inside user router
[2017-05-15 06:54:06.260] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 06:54:06.260] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM0ODU2LCJpYXQiOjE0OTQ4MzEyNTYsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8OAB0F_NodNmLNX8mNvhWgjwJFN-nr8dRbTPV1HLcw8
[2017-05-15 06:54:06.260] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494834856,
  iat: 1494831256,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 06:55:37.526] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM0ODU2LCJpYXQiOjE0OTQ4MzEyNTYsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8OAB0F_NodNmLNX8mNvhWgjwJFN-nr8dRbTPV1HLcw8',
  _refresh_token: '4bbf8177404bdb98b043432996cbdba1',
  _ga: 'GA1.1.646637984.1494831245',
  _gid: 'GA1.1.261094043.1494831245' }
[2017-05-15 06:55:37.527] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM0ODU2LCJpYXQiOjE0OTQ4MzEyNTYsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8OAB0F_NodNmLNX8mNvhWgjwJFN-nr8dRbTPV1HLcw8
[2017-05-15 06:55:37.528] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 06:55:39.002] [DEBUG] AppRouter - inside user router
[2017-05-15 06:55:39.002] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 06:55:39.002] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM0ODU2LCJpYXQiOjE0OTQ4MzEyNTYsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8OAB0F_NodNmLNX8mNvhWgjwJFN-nr8dRbTPV1HLcw8
[2017-05-15 06:55:39.003] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494834856,
  iat: 1494831256,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 06:59:33.561] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 06:59:45.073] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 06:59:45.089] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:59:45.090] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:59:47.605] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T06:59:59.259Z',
     createdOn: 1494831599259,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494831599259,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:59:49.196] [DEBUG] AppRouter - inside callback
[2017-05-15 06:59:49.197] [DEBUG] Controller - Auth Code:  238f850bd9ef353388d6796610d14aa0
[2017-05-15 06:59:49.198] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '238f850bd9ef353388d6796610d14aa0',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 06:59:49.199] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 06:59:50.348] [DEBUG] Controller - after making call {"access_token":"8f96075064ae7a866d5ee42dfa627c59","token_type":"Bearer","expires_in":3600,"refresh_token":"c7ba980c0745e41449f7e7dfcbf5b535","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjAyLCJpYXQiOjE0OTQ4MzE2MDIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8YyvIBdPsXqQ6o8QWx6HHveh_7Y30Gdf4mjNHXBl0dc"}
[2017-05-15 06:59:50.358] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjAyLCJpYXQiOjE0OTQ4MzE2MDIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8YyvIBdPsXqQ6o8QWx6HHveh_7Y30Gdf4mjNHXBl0dc',
  _refresh_token: 'c7ba980c0745e41449f7e7dfcbf5b535' }
[2017-05-15 06:59:50.360] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjAyLCJpYXQiOjE0OTQ4MzE2MDIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8YyvIBdPsXqQ6o8QWx6HHveh_7Y30Gdf4mjNHXBl0dc
[2017-05-15 06:59:50.361] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 06:59:51.846] [DEBUG] AppRouter - inside user router
[2017-05-15 06:59:51.847] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 06:59:51.847] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjAyLCJpYXQiOjE0OTQ4MzE2MDIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.8YyvIBdPsXqQ6o8QWx6HHveh_7Y30Gdf4mjNHXBl0dc
[2017-05-15 06:59:51.847] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494835202,
  iat: 1494831602,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 06:59:51.996] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 06:59:51.997] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:59:51.997] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:59:52.279] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 06:59:52.280] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 06:59:52.281] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 06:59:53.418] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:00:05.148Z',
     createdOn: 1494831605148,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494831605148,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:59:54.148] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:00:05.779Z',
     createdOn: 1494831605779,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494831605779,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 06:59:59.028] [DEBUG] AppRouter - inside callback
[2017-05-15 06:59:59.028] [DEBUG] Controller - Auth Code:  1a5ed82e871c2cd86f528466603e4419
[2017-05-15 06:59:59.028] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '1a5ed82e871c2cd86f528466603e4419',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 06:59:59.029] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 07:00:00.250] [DEBUG] Controller - after making call {"access_token":"705c0e89f2345646de601793294720ee","token_type":"Bearer","expires_in":3600,"refresh_token":"99f414e8379ab044b8daab709cfd790a","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjEyLCJpYXQiOjE0OTQ4MzE2MTIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.-7gwbUkVtY0uPdpA9kK3frMKQlUAk5HwHAYeGaP5TEk"}
[2017-05-15 07:00:00.258] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjEyLCJpYXQiOjE0OTQ4MzE2MTIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.-7gwbUkVtY0uPdpA9kK3frMKQlUAk5HwHAYeGaP5TEk',
  _refresh_token: '99f414e8379ab044b8daab709cfd790a' }
[2017-05-15 07:00:00.259] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjEyLCJpYXQiOjE0OTQ4MzE2MTIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.-7gwbUkVtY0uPdpA9kK3frMKQlUAk5HwHAYeGaP5TEk
[2017-05-15 07:00:00.261] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 07:00:01.698] [DEBUG] AppRouter - inside user router
[2017-05-15 07:00:01.700] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 07:00:01.701] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM1MjEyLCJpYXQiOjE0OTQ4MzE2MTIsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.-7gwbUkVtY0uPdpA9kK3frMKQlUAk5HwHAYeGaP5TEk
[2017-05-15 07:00:01.706] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494835212,
  iat: 1494831612,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 07:00:01.823] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 07:00:01.825] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:00:01.826] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:00:02.111] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 07:00:02.112] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:00:02.112] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:00:02.969] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:00:14.595Z',
     createdOn: 1494831614595,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494831614595,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:00:03.370] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:00:14.999Z',
     createdOn: 1494831614999,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494831614999,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:13:27.976] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false', party_id: '569' }
[2017-05-15 07:13:27.978] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:13:27.979] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:13:30.479] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:13:42.011Z',
     createdOn: 1494832422011,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494832422011,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:13:36.578] [DEBUG] AppRouter - inside callback
[2017-05-15 07:13:36.579] [DEBUG] Controller - Auth Code:  6cfc40108a161cff4a24aee7bfbb4170
[2017-05-15 07:13:36.579] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '6cfc40108a161cff4a24aee7bfbb4170',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 07:13:36.579] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 07:13:38.726] [DEBUG] Controller - after making call {"access_token":"d5c7b9e68fbdbb5305b14ff0b2734e33","token_type":"Bearer","expires_in":3600,"refresh_token":"cd04466face9ef8160333b0a509ee254","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM2MDMxLCJpYXQiOjE0OTQ4MzI0MzEsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.fa-KCo1QXuWV-icFlZGJAAa7gM-YElYVVVJf2-5Q8i8"}
[2017-05-15 07:13:38.736] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM2MDMxLCJpYXQiOjE0OTQ4MzI0MzEsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.fa-KCo1QXuWV-icFlZGJAAa7gM-YElYVVVJf2-5Q8i8',
  _refresh_token: 'cd04466face9ef8160333b0a509ee254' }
[2017-05-15 07:13:38.737] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM2MDMxLCJpYXQiOjE0OTQ4MzI0MzEsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.fa-KCo1QXuWV-icFlZGJAAa7gM-YElYVVVJf2-5Q8i8
[2017-05-15 07:13:38.737] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 07:13:40.153] [DEBUG] AppRouter - inside user router
[2017-05-15 07:13:40.154] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 07:13:40.155] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM2MDMxLCJpYXQiOjE0OTQ4MzI0MzEsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.fa-KCo1QXuWV-icFlZGJAAa7gM-YElYVVVJf2-5Q8i8
[2017-05-15 07:13:40.157] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494836031,
  iat: 1494832431,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 07:13:40.285] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 07:13:40.288] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:13:40.288] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:13:41.101] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false' }
[2017-05-15 07:13:41.106] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:13:41.113] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:13:41.528] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:13:53.189Z',
     createdOn: 1494832433189,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494832433189,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:13:43.177] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:13:54.849Z',
     createdOn: 1494832434849,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494832434849,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:34:02.975] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 07:35:25.666] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 07:48:04.919] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 07:50:42.769] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2', isadmin: 'false', party_id: '569' }
[2017-05-15 07:50:42.785] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:50:42.786] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:50:44.474] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:50:56.138Z',
     createdOn: 1494834656138,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494834656138,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:50:50.097] [DEBUG] AppRouter - inside callback
[2017-05-15 07:50:50.099] [DEBUG] Controller - Auth Code:  1577014e84cf9a67e81e4a0f474c2120
[2017-05-15 07:50:50.099] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '1577014e84cf9a67e81e4a0f474c2120',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 07:50:50.101] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 07:50:51.908] [DEBUG] Controller - after making call {"access_token":"c083eb97e447e4cbba709824d6197aab","token_type":"Bearer","expires_in":3600,"refresh_token":"7b97b5f7f6113b74bb76243a093c2b64","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4MjY0LCJpYXQiOjE0OTQ4MzQ2NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UklWFRgpbtLlvZFnM0nqBAkeLtZht7Oyz1C16U3uyLw"}
[2017-05-15 07:50:51.920] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '2',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4MjY0LCJpYXQiOjE0OTQ4MzQ2NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UklWFRgpbtLlvZFnM0nqBAkeLtZht7Oyz1C16U3uyLw',
  _refresh_token: '7b97b5f7f6113b74bb76243a093c2b64' }
[2017-05-15 07:50:51.923] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4MjY0LCJpYXQiOjE0OTQ4MzQ2NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UklWFRgpbtLlvZFnM0nqBAkeLtZht7Oyz1C16U3uyLw
[2017-05-15 07:50:51.924] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 07:50:53.361] [DEBUG] AppRouter - inside user router
[2017-05-15 07:50:53.362] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 07:50:53.362] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4MjY0LCJpYXQiOjE0OTQ4MzQ2NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UklWFRgpbtLlvZFnM0nqBAkeLtZht7Oyz1C16U3uyLw
[2017-05-15 07:50:53.363] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494838264,
  iat: 1494834664,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 07:51:13.589] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '14',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4MjY0LCJpYXQiOjE0OTQ4MzQ2NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UklWFRgpbtLlvZFnM0nqBAkeLtZht7Oyz1C16U3uyLw',
  _refresh_token: '7b97b5f7f6113b74bb76243a093c2b64',
  _ga: 'GA1.1.2014387453.1494834652',
  _gid: 'GA1.1.1774741389.1494834652',
  _gat: '1' }
[2017-05-15 07:51:13.591] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4MjY0LCJpYXQiOjE0OTQ4MzQ2NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UklWFRgpbtLlvZFnM0nqBAkeLtZht7Oyz1C16U3uyLw
[2017-05-15 07:51:13.591] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 07:51:15.842] [DEBUG] AppRouter - inside user router
[2017-05-15 07:51:15.843] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 07:51:15.843] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4MjY0LCJpYXQiOjE0OTQ4MzQ2NjQsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.UklWFRgpbtLlvZFnM0nqBAkeLtZht7Oyz1C16U3uyLw
[2017-05-15 07:51:15.843] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494838264,
  iat: 1494834664,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 07:54:25.028] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '14', isadmin: 'false' }
[2017-05-15 07:54:25.030] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:54:25.031] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:54:26.887] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:54:38.553Z',
     createdOn: 1494834878553,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494834878553,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:54:33.002] [DEBUG] AppRouter - inside callback
[2017-05-15 07:54:33.003] [DEBUG] Controller - Auth Code:  fbf4772484e2917b0f3122cc4fb0fc83
[2017-05-15 07:54:33.003] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'fbf4772484e2917b0f3122cc4fb0fc83',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 07:54:33.004] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 07:54:35.437] [DEBUG] Controller - after making call {"access_token":"09a8213490198b84655dbb377b7705b6","token_type":"Bearer","expires_in":3600,"refresh_token":"b9a2eedf88a9448c71679b2876da9b99","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NDg3LCJpYXQiOjE0OTQ4MzQ4ODcsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.58B0H78kj0_ZFof2mOiz-Kmp9WoGGXbQG5rr2Jd8Kac"}
[2017-05-15 07:54:35.447] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '14',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NDg3LCJpYXQiOjE0OTQ4MzQ4ODcsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.58B0H78kj0_ZFof2mOiz-Kmp9WoGGXbQG5rr2Jd8Kac',
  _refresh_token: 'b9a2eedf88a9448c71679b2876da9b99' }
[2017-05-15 07:54:35.447] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NDg3LCJpYXQiOjE0OTQ4MzQ4ODcsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.58B0H78kj0_ZFof2mOiz-Kmp9WoGGXbQG5rr2Jd8Kac
[2017-05-15 07:54:35.448] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 07:54:37.418] [DEBUG] AppRouter - inside user router
[2017-05-15 07:54:37.419] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 07:54:37.419] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NDg3LCJpYXQiOjE0OTQ4MzQ4ODcsInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.58B0H78kj0_ZFof2mOiz-Kmp9WoGGXbQG5rr2Jd8Kac
[2017-05-15 07:54:37.420] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494838487,
  iat: 1494834887,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 07:55:44.494] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-15 07:56:04.200] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '14', isadmin: 'false' }
[2017-05-15 07:56:04.220] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:56:04.221] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:56:06.585] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-15T07:56:18.281Z',
     createdOn: 1494834978281,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1494834978281,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-15 07:56:15.602] [DEBUG] AppRouter - inside callback
[2017-05-15 07:56:15.604] [DEBUG] Controller - Auth Code:  fb04d8a67177aee239ba3cfe8b7dff4f
[2017-05-15 07:56:15.605] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'fb04d8a67177aee239ba3cfe8b7dff4f',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-15 07:56:15.607] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-15 07:56:17.232] [DEBUG] Controller - after making call {"access_token":"930a9ab1d6c262d00cd6f2b74c8a6799","token_type":"Bearer","expires_in":3600,"refresh_token":"c2ad2c70d54a4575d6b3a62c0e21fe84","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NTg5LCJpYXQiOjE0OTQ4MzQ5ODksInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.ziPLBy3-7S5q8WgPL7M6xNA2lC2gOUdwX8dcvWpdluo"}
[2017-05-15 07:56:17.244] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '14',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@tandfindia.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NTg5LCJpYXQiOjE0OTQ4MzQ5ODksInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.ziPLBy3-7S5q8WgPL7M6xNA2lC2gOUdwX8dcvWpdluo',
  _refresh_token: 'c2ad2c70d54a4575d6b3a62c0e21fe84' }
[2017-05-15 07:56:17.247] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NTg5LCJpYXQiOjE0OTQ4MzQ5ODksInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.ziPLBy3-7S5q8WgPL7M6xNA2lC2gOUdwX8dcvWpdluo
[2017-05-15 07:56:17.248] [DEBUG] Controller - Controller : allowAccess
[2017-05-15 07:56:19.200] [DEBUG] AppRouter - inside user router
[2017-05-15 07:56:19.202] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-15 07:56:19.203] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTBjNWIzYWNiM2MzZTEwMDA0ZGFlNGEiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk0ODM4NTg5LCJpYXQiOjE0OTQ4MzQ5ODksInVzZXIiOnsiX2lkIjoiNTkwYzViM2FjYjNjM2UxMDAwNGRhZTRhIiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IiwiZW1haWwiOiJoZW5yeS5qYWNvYkB0YW5kZmluZGlhLmNvbSIsImNyZWF0ZWRPbiI6MTQ5Mzk4MjAxMDA4OSwiZGlzcGxheU5hbWUiOiJIZW5yeSB1bmRlZmluZWQiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn19.ziPLBy3-7S5q8WgPL7M6xNA2lC2gOUdwX8dcvWpdluo
[2017-05-15 07:56:19.203] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '590c5b3acb3c3e10004dae4a',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1494838589,
  iat: 1494834989,
  user: 
   { _id: '590c5b3acb3c3e10004dae4a',
     username: 'henry.jacob@tandfindia.com',
     firstName: 'Henry',
     email: 'henry.jacob@tandfindia.com',
     createdOn: 1493982010089,
     displayName: 'Henry undefined',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' } }
[2017-05-15 07:56:19.610] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '14', isadmin: 'false' }
[2017-05-15 07:56:19.611] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:56:19.611] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-15 07:56:19.768] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '14', isadmin: 'false' }
[2017-05-15 07:56:19.773] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-15 07:56:19.776] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
