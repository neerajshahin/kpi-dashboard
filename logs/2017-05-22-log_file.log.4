[2017-05-22 11:08:17.126] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:08:18.690] [DEBUG] AppRouter - inside user router
[2017-05-22 11:08:18.691] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:08:18.691] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTAxLCJpYXQiOjE0OTU0NTEzMDEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.qW6MLxtDLvshrQyCPO6MoTBfMX5d795QmkOQJseyOk0
[2017-05-22 11:08:18.692] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454901,
  iat: 1495451301,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:08:18.828] [DEBUG] AppRouter - inside user router
[2017-05-22 11:08:18.829] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:08:18.829] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTAxLCJpYXQiOjE0OTU0NTEzMDEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.qW6MLxtDLvshrQyCPO6MoTBfMX5d795QmkOQJseyOk0
[2017-05-22 11:08:18.829] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454901,
  iat: 1495451301,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:09:36.838] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '140', isadmin: 'true' }
[2017-05-22 11:09:36.838] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:09:36.838] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:09:38.591] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:09:42.180Z',
     createdOn: 1495451382180,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451382180,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:09:44.959] [DEBUG] AppRouter - inside callback
[2017-05-22 11:09:44.959] [DEBUG] Controller - Auth Code:  34f6c2cd37160741772a465cd764d691
[2017-05-22 11:09:44.959] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '34f6c2cd37160741772a465cd764d691',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:09:44.960] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:09:46.310] [DEBUG] Controller - after making call access token {"access_token":"4bba64a569f4da2112b2ada808882689","token_type":"Bearer","expires_in":3600,"refresh_token":"6834a6cab99518508d25f177634b6fc0","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI"}
[2017-05-22 11:09:46.310] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:09:46.318] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '140',
  isadmin: 'true',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI',
  _refresh_token: '6834a6cab99518508d25f177634b6fc0' }
[2017-05-22 11:09:46.319] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI
[2017-05-22 11:09:46.321] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:09:47.749] [DEBUG] AppRouter - inside user router
[2017-05-22 11:09:47.750] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:09:47.750] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI
[2017-05-22 11:09:47.750] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454990,
  iat: 1495451390,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:10:55.189] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI',
  _refresh_token: '6834a6cab99518508d25f177634b6fc0',
  _ga: 'GA1.1.1546993072.1495451387',
  _gid: 'GA1.1.1648092585.1495451387' }
[2017-05-22 11:10:55.189] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI
[2017-05-22 11:10:55.190] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:10:57.815] [DEBUG] AppRouter - inside user router
[2017-05-22 11:10:57.816] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:10:57.816] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI
[2017-05-22 11:10:57.816] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454990,
  iat: 1495451390,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:14:25.515] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI',
  _refresh_token: '6834a6cab99518508d25f177634b6fc0',
  _ga: 'GA1.1.1546993072.1495451387',
  _gid: 'GA1.1.656083376.1495451456' }
[2017-05-22 11:14:25.515] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI
[2017-05-22 11:14:25.515] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:15:19.679] [DEBUG] AppRouter - inside user router
[2017-05-22 11:15:19.680] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:15:19.680] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTkwLCJpYXQiOjE0OTU0NTEzOTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.jWQZ0dMoVAI_crQS8njO57-jglnMdnnKMXeXYjodHMI
[2017-05-22 11:15:19.680] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454990,
  iat: 1495451390,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:15:29.044] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:15:29.045] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:15:29.045] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:15:30.704] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:15:34.311Z',
     createdOn: 1495451734311,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451734311,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:16:56.786] [DEBUG] AppRouter - inside callback
[2017-05-22 11:16:56.786] [DEBUG] Controller - Auth Code:  054db891b09b08e468cbf3fddf43d5d3
[2017-05-22 11:16:56.786] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '054db891b09b08e468cbf3fddf43d5d3',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:16:56.787] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:16:58.085] [DEBUG] Controller - after making call access token {"access_token":"a5f43ddf5cfbc44c5ba6b7f650e0dfb7","token_type":"Bearer","expires_in":3600,"refresh_token":"ef8de8413698e000d097f1b06cdae6c2","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDIyLCJpYXQiOjE0OTU0NTE4MjIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.myoSsNGTsYasM-TNY9pYh4WA4MWzl3zi5y3506VFrB8"}
[2017-05-22 11:16:58.086] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:16:58.094] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDIyLCJpYXQiOjE0OTU0NTE4MjIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.myoSsNGTsYasM-TNY9pYh4WA4MWzl3zi5y3506VFrB8',
  _refresh_token: 'ef8de8413698e000d097f1b06cdae6c2' }
[2017-05-22 11:16:58.095] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDIyLCJpYXQiOjE0OTU0NTE4MjIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.myoSsNGTsYasM-TNY9pYh4WA4MWzl3zi5y3506VFrB8
[2017-05-22 11:16:58.096] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:17:22.910] [DEBUG] AppRouter - inside user router
[2017-05-22 11:17:22.911] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:17:22.911] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDIyLCJpYXQiOjE0OTU0NTE4MjIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.myoSsNGTsYasM-TNY9pYh4WA4MWzl3zi5y3506VFrB8
[2017-05-22 11:17:22.911] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495455422,
  iat: 1495451822,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:17:23.132] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:17:23.133] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:17:23.133] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:17:23.286] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:17:23.287] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:17:23.287] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:17:24.714] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:17:28.329Z',
     createdOn: 1495451848329,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451848329,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:17:24.722] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:17:28.328Z',
     createdOn: 1495451848328,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451848328,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:17:29.973] [DEBUG] AppRouter - inside callback
[2017-05-22 11:17:29.974] [DEBUG] Controller - Auth Code:  aca15c554bacad3525e172afe52e1fe8
[2017-05-22 11:17:29.975] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'aca15c554bacad3525e172afe52e1fe8',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:17:29.977] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:17:31.471] [DEBUG] Controller - after making call access token {"access_token":"dcd499035b12f91797c90bde45556acf","token_type":"Bearer","expires_in":3600,"refresh_token":"006a2f5b040bb7a15710395ae892a655","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDU1LCJpYXQiOjE0OTU0NTE4NTUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.HZl6Fx7KYBSzBTnyzoS_KDHpxylQtCCPuSLcUaRfFM0"}
[2017-05-22 11:17:31.472] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:17:31.481] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDU1LCJpYXQiOjE0OTU0NTE4NTUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.HZl6Fx7KYBSzBTnyzoS_KDHpxylQtCCPuSLcUaRfFM0',
  _refresh_token: '006a2f5b040bb7a15710395ae892a655' }
[2017-05-22 11:17:31.483] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDU1LCJpYXQiOjE0OTU0NTE4NTUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.HZl6Fx7KYBSzBTnyzoS_KDHpxylQtCCPuSLcUaRfFM0
[2017-05-22 11:17:31.484] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:17:37.915] [DEBUG] AppRouter - inside user router
[2017-05-22 11:17:37.915] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:17:37.916] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDU1LCJpYXQiOjE0OTU0NTE4NTUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.HZl6Fx7KYBSzBTnyzoS_KDHpxylQtCCPuSLcUaRfFM0
[2017-05-22 11:17:37.916] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495455455,
  iat: 1495451855,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:17:38.123] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:17:38.124] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:17:38.125] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:17:38.295] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:17:38.297] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:17:38.297] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:17:39.423] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:17:43.039Z',
     createdOn: 1495451863039,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451863039,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:17:39.430] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:17:43.046Z',
     createdOn: 1495451863046,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451863046,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:17:46.824] [DEBUG] AppRouter - inside callback
[2017-05-22 11:17:46.825] [DEBUG] Controller - Auth Code:  de9eff4bb3fc5e08581099fb26d4b365
[2017-05-22 11:17:46.825] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'de9eff4bb3fc5e08581099fb26d4b365',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:17:46.826] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:17:47.686] [DEBUG] Controller - after making call access token {"access_token":"cbfa73c0ce70447654ee3e34d5d62a60","token_type":"Bearer","expires_in":3600,"refresh_token":"6c977959cd8ba198a266999c91492054","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDcxLCJpYXQiOjE0OTU0NTE4NzEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.KuBMOY5h72ZDFcocx9yCTW4zuJxY3WesPPVwVYz-UVY"}
[2017-05-22 11:17:47.686] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:17:52.362] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false', party_id: '569' }
[2017-05-22 11:17:52.363] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:17:52.363] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:17:53.791] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:17:57.356Z',
     createdOn: 1495451877356,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451877356,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:17:54.139] [DEBUG] AppRouter - inside callback
[2017-05-22 11:17:54.139] [DEBUG] Controller - Auth Code:  e43bae659af26f95647496012f9c7ed3
[2017-05-22 11:17:54.139] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'e43bae659af26f95647496012f9c7ed3',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:17:54.140] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:17:55.008] [DEBUG] Controller - after making call access token {"access_token":"cf2e6d93f9cfcdd154ffb40e331659f0","token_type":"Bearer","expires_in":3600,"refresh_token":"dcf8fbaee487bf3f14494e72c7615cd8","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDc5LCJpYXQiOjE0OTU0NTE4NzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.hWgwgxlr7k42Vx2FK___imZXCiFya_1pDyXKyVtwm98"}
[2017-05-22 11:17:55.009] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:17:55.020] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDc5LCJpYXQiOjE0OTU0NTE4NzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.hWgwgxlr7k42Vx2FK___imZXCiFya_1pDyXKyVtwm98',
  _refresh_token: 'dcf8fbaee487bf3f14494e72c7615cd8' }
[2017-05-22 11:17:55.021] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDc5LCJpYXQiOjE0OTU0NTE4NzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.hWgwgxlr7k42Vx2FK___imZXCiFya_1pDyXKyVtwm98
[2017-05-22 11:17:55.023] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:18:12.716] [DEBUG] AppRouter - inside user router
[2017-05-22 11:18:12.716] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:18:12.716] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NDc5LCJpYXQiOjE0OTU0NTE4NzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.hWgwgxlr7k42Vx2FK___imZXCiFya_1pDyXKyVtwm98
[2017-05-22 11:18:12.717] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495455479,
  iat: 1495451879,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:18:12.953] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:18:12.953] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:18:12.954] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:18:13.329] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:18:13.330] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:18:13.330] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:18:14.901] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:18:18.500Z',
     createdOn: 1495451898500,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451898500,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:18:14.904] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:18:18.502Z',
     createdOn: 1495451898502,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451898502,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:20:00.292] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false', party_id: '569' }
[2017-05-22 11:20:00.293] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:20:00.293] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:20:02.033] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:20:05.571Z',
     createdOn: 1495452005571,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452005571,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:20:06.987] [DEBUG] AppRouter - inside callback
[2017-05-22 11:20:06.987] [DEBUG] Controller - Auth Code:  7c57fdcd3d2404c2337c4d2f1045a3bc
[2017-05-22 11:20:06.987] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '7c57fdcd3d2404c2337c4d2f1045a3bc',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:20:06.988] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:20:07.935] [DEBUG] Controller - after making call access token {"access_token":"0600607ef6fd617432369b4cf1b885fc","token_type":"Bearer","expires_in":3600,"refresh_token":"adfe1b0678ebf37c748baa092a67fee7","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjEyLCJpYXQiOjE0OTU0NTIwMTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wJXvffnXqdjO7l84t4swGlS2KmmzRt6OBJNz3OK9hg4"}
[2017-05-22 11:20:07.936] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:20:07.943] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjEyLCJpYXQiOjE0OTU0NTIwMTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wJXvffnXqdjO7l84t4swGlS2KmmzRt6OBJNz3OK9hg4',
  _refresh_token: 'adfe1b0678ebf37c748baa092a67fee7' }
[2017-05-22 11:20:07.944] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjEyLCJpYXQiOjE0OTU0NTIwMTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wJXvffnXqdjO7l84t4swGlS2KmmzRt6OBJNz3OK9hg4
[2017-05-22 11:20:07.945] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:20:32.403] [DEBUG] AppRouter - inside user router
[2017-05-22 11:20:32.403] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:20:32.403] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjEyLCJpYXQiOjE0OTU0NTIwMTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wJXvffnXqdjO7l84t4swGlS2KmmzRt6OBJNz3OK9hg4
[2017-05-22 11:20:32.403] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495455612,
  iat: 1495452012,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:20:43.635] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:20:43.636] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:20:43.636] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:20:45.096] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:20:45.097] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:20:45.097] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:20:45.340] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:20:48.957Z',
     createdOn: 1495452048957,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452048957,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:20:45.984] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:20:49.606Z',
     createdOn: 1495452049606,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452049606,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:20:57.641] [DEBUG] AppRouter - inside callback
[2017-05-22 11:20:57.641] [DEBUG] Controller - Auth Code:  da9bdd95e4e4164b9970f1189161af73
[2017-05-22 11:20:57.641] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'da9bdd95e4e4164b9970f1189161af73',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:20:57.641] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:20:58.862] [DEBUG] Controller - after making call access token {"access_token":"8867556a3b73e56aca79ec95d66825e0","token_type":"Bearer","expires_in":3600,"refresh_token":"cadd85fedc0dc238115bdd0a914b4698","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjYzLCJpYXQiOjE0OTU0NTIwNjMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zJBNnlZJ1PKj2_wlwr3MyyFVMbSI8qdnxuwGAPuxQZk"}
[2017-05-22 11:20:58.862] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:20:58.874] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjYzLCJpYXQiOjE0OTU0NTIwNjMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zJBNnlZJ1PKj2_wlwr3MyyFVMbSI8qdnxuwGAPuxQZk',
  _refresh_token: 'cadd85fedc0dc238115bdd0a914b4698' }
[2017-05-22 11:20:58.874] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjYzLCJpYXQiOjE0OTU0NTIwNjMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zJBNnlZJ1PKj2_wlwr3MyyFVMbSI8qdnxuwGAPuxQZk
[2017-05-22 11:20:58.874] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:21:17.633] [DEBUG] AppRouter - inside user router
[2017-05-22 11:21:17.633] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:21:17.633] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1NjYzLCJpYXQiOjE0OTU0NTIwNjMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zJBNnlZJ1PKj2_wlwr3MyyFVMbSI8qdnxuwGAPuxQZk
[2017-05-22 11:21:17.633] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495455663,
  iat: 1495452063,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:23:12.154] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:23:12.157] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:23:12.157] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:23:15.986] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:23:15.987] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:23:15.988] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:23:15.993] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:23:19.605Z',
     createdOn: 1495452199605,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452199605,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:23:17.192] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:23:20.772Z',
     createdOn: 1495452200772,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452200772,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:23:22.642] [DEBUG] AppRouter - inside callback
[2017-05-22 11:23:22.642] [DEBUG] Controller - Auth Code:  61ef9490e642b53d5fc0ada04b46447d
[2017-05-22 11:23:22.642] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '61ef9490e642b53d5fc0ada04b46447d',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:23:22.642] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:23:25.977] [DEBUG] Controller - after making call access token {"access_token":"c3ddec22611dfc51d4505f614f49ae09","token_type":"Bearer","expires_in":3600,"refresh_token":"34db87307ae0ce5700fe60e04997c26a","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODEwLCJpYXQiOjE0OTU0NTIyMTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1u-w7i1y-3ftuFpnVZHV-y462T3lqjnAEINWgUo56bA"}
[2017-05-22 11:23:25.979] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:23:25.990] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODEwLCJpYXQiOjE0OTU0NTIyMTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1u-w7i1y-3ftuFpnVZHV-y462T3lqjnAEINWgUo56bA',
  _refresh_token: '34db87307ae0ce5700fe60e04997c26a' }
[2017-05-22 11:23:25.990] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODEwLCJpYXQiOjE0OTU0NTIyMTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1u-w7i1y-3ftuFpnVZHV-y462T3lqjnAEINWgUo56bA
[2017-05-22 11:23:25.991] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:23:52.898] [DEBUG] AppRouter - inside user router
[2017-05-22 11:23:52.899] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:23:52.899] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODEwLCJpYXQiOjE0OTU0NTIyMTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1u-w7i1y-3ftuFpnVZHV-y462T3lqjnAEINWgUo56bA
[2017-05-22 11:23:52.899] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495455810,
  iat: 1495452210,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:24:20.650] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:24:20.651] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:24:20.651] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:24:22.324] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:24:25.816Z',
     createdOn: 1495452265816,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452265816,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:24:22.912] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:24:22.912] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:24:22.913] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:24:23.705] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:24:27.326Z',
     createdOn: 1495452267326,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452267326,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:24:52.046] [DEBUG] AppRouter - inside callback
[2017-05-22 11:24:52.047] [DEBUG] Controller - Auth Code:  0c56d02b29cd23d93a968460f6b58627
[2017-05-22 11:24:52.047] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '0c56d02b29cd23d93a968460f6b58627',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:24:52.048] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:24:52.974] [DEBUG] Controller - after making call access token {"access_token":"18a31997a0c2224da402f6f448d0f653","token_type":"Bearer","expires_in":3600,"refresh_token":"7ee3930a014dae64e3b6edff8496f345","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODk3LCJpYXQiOjE0OTU0NTIyOTcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.NHBHe1UlGZVT4rkZDb2Pp0JYGdlxrXDMq505GIpVYds"}
[2017-05-22 11:24:52.974] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:24:52.982] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODk3LCJpYXQiOjE0OTU0NTIyOTcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.NHBHe1UlGZVT4rkZDb2Pp0JYGdlxrXDMq505GIpVYds',
  _refresh_token: '7ee3930a014dae64e3b6edff8496f345' }
[2017-05-22 11:24:52.983] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODk3LCJpYXQiOjE0OTU0NTIyOTcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.NHBHe1UlGZVT4rkZDb2Pp0JYGdlxrXDMq505GIpVYds
[2017-05-22 11:24:52.983] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:25:01.104] [DEBUG] AppRouter - inside user router
[2017-05-22 11:25:01.104] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:25:01.104] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU1ODk3LCJpYXQiOjE0OTU0NTIyOTcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.NHBHe1UlGZVT4rkZDb2Pp0JYGdlxrXDMq505GIpVYds
[2017-05-22 11:25:01.105] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495455897,
  iat: 1495452297,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:26:39.692] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:26:39.693] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:26:39.693] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:26:41.590] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:26:45.182Z',
     createdOn: 1495452405182,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452405182,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:26:43.422] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:26:43.423] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:26:43.423] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:26:44.405] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:26:47.972Z',
     createdOn: 1495452407972,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495452407972,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 13:09:13.491] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false', party_id: '569' }
[2017-05-22 13:09:13.492] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 13:09:13.492] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 13:09:15.313] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T13:09:19.884Z',
     createdOn: 1495458559884,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495458559884,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 13:09:18.476] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false', party_id: '569' }
[2017-05-22 13:09:18.477] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 13:09:18.477] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 13:09:19.413] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T13:09:24.041Z',
     createdOn: 1495458564041,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495458564041,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 13:09:19.701] [DEBUG] AppRouter - inside callback
[2017-05-22 13:09:19.701] [DEBUG] Controller - Auth Code:  901e13343037b191917023f766e520e6
[2017-05-22 13:09:19.701] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '901e13343037b191917023f766e520e6',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 13:09:19.702] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 13:09:21.211] [DEBUG] Controller - after making call access token {"access_token":"efea09bb1da583fbaa731b2d362255f3","token_type":"Bearer","expires_in":3600,"refresh_token":"197af9e5159533a4c028b75048c2d5fc","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTY2LCJpYXQiOjE0OTU0NTg1NjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.W8QJ4yJCc3xUjyQJYgPtOCn3dqzHx4s9NjgjamKbxH8"}
[2017-05-22 13:09:21.212] [DEBUG] Controller - after making call access token error null
[2017-05-22 13:09:21.220] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTY2LCJpYXQiOjE0OTU0NTg1NjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.W8QJ4yJCc3xUjyQJYgPtOCn3dqzHx4s9NjgjamKbxH8',
  _refresh_token: '197af9e5159533a4c028b75048c2d5fc' }
[2017-05-22 13:09:21.220] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTY2LCJpYXQiOjE0OTU0NTg1NjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.W8QJ4yJCc3xUjyQJYgPtOCn3dqzHx4s9NjgjamKbxH8
[2017-05-22 13:09:21.221] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 13:09:22.817] [DEBUG] AppRouter - inside user router
[2017-05-22 13:09:22.818] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 13:09:22.818] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTY2LCJpYXQiOjE0OTU0NTg1NjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.W8QJ4yJCc3xUjyQJYgPtOCn3dqzHx4s9NjgjamKbxH8
[2017-05-22 13:09:22.819] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495462166,
  iat: 1495458566,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 13:09:32.803] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 13:09:32.805] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 13:09:32.805] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 13:09:34.219] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T13:09:38.853Z',
     createdOn: 1495458578853,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495458578853,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 13:09:44.538] [DEBUG] AppRouter - inside callback
[2017-05-22 13:09:44.538] [DEBUG] Controller - Auth Code:  92440f92b286297fe814b0abf8c6ed80
[2017-05-22 13:09:44.538] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '92440f92b286297fe814b0abf8c6ed80',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 13:09:44.538] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 13:09:45.799] [DEBUG] Controller - after making call access token {"access_token":"1f0472028828c174acbf0f082ef67844","token_type":"Bearer","expires_in":3600,"refresh_token":"46401eee22ffd95c9ab5bf6b51456e9a","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTkxLCJpYXQiOjE0OTU0NTg1OTEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.E7FCgYTgnePOVvONGI_zsrzz0Iyg7B5d5xbrzd84E7E"}
[2017-05-22 13:09:45.800] [DEBUG] Controller - after making call access token error null
[2017-05-22 13:09:45.809] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'billavaa@gmail.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTkxLCJpYXQiOjE0OTU0NTg1OTEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.E7FCgYTgnePOVvONGI_zsrzz0Iyg7B5d5xbrzd84E7E',
  _refresh_token: '46401eee22ffd95c9ab5bf6b51456e9a' }
[2017-05-22 13:09:45.809] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTkxLCJpYXQiOjE0OTU0NTg1OTEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.E7FCgYTgnePOVvONGI_zsrzz0Iyg7B5d5xbrzd84E7E
[2017-05-22 13:09:45.810] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 13:09:47.317] [DEBUG] AppRouter - inside user router
[2017-05-22 13:09:47.318] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 13:09:47.318] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTkxLCJpYXQiOjE0OTU0NTg1OTEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.E7FCgYTgnePOVvONGI_zsrzz0Iyg7B5d5xbrzd84E7E
[2017-05-22 13:09:47.318] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495462191,
  iat: 1495458591,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 13:09:47.476] [DEBUG] AppRouter - inside user router
[2017-05-22 13:09:47.477] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 13:09:47.477] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDYyMTkxLCJpYXQiOjE0OTU0NTg1OTEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.E7FCgYTgnePOVvONGI_zsrzz0Iyg7B5d5xbrzd84E7E
