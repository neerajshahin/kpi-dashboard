[2017-05-25 04:25:23.343] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-25 04:25:44.020] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 04:25:44.030] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:25:44.031] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:25:48.036] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:25:53.597Z',
     createdOn: 1495686353597,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686353597,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:25:50.317] [DEBUG] AppRouter - inside callback
[2017-05-25 04:25:50.317] [DEBUG] Controller - Auth Code:  01fe9346fc27f33c58ba8076d312086c
[2017-05-25 04:25:50.318] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '01fe9346fc27f33c58ba8076d312086c',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 04:25:50.319] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 04:25:53.393] [DEBUG] Controller - after making call {"access_token":"c0c1e0511a431acb07b12f8e15a53fcd","token_type":"Bearer","expires_in":3600,"refresh_token":"00cfd924460f32bc1fb314185f955745","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTU5LCJpYXQiOjE0OTU2ODYzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.K49rovMfzgBRRQeD-Ju2883PIyAp_GtTs0knJrrcA2I"}
[2017-05-25 04:25:53.403] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTU5LCJpYXQiOjE0OTU2ODYzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.K49rovMfzgBRRQeD-Ju2883PIyAp_GtTs0knJrrcA2I',
  _refresh_token: '00cfd924460f32bc1fb314185f955745' }
[2017-05-25 04:25:53.404] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTU5LCJpYXQiOjE0OTU2ODYzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.K49rovMfzgBRRQeD-Ju2883PIyAp_GtTs0knJrrcA2I
[2017-05-25 04:25:53.405] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 04:25:55.123] [DEBUG] AppRouter - inside user router
[2017-05-25 04:25:55.124] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:25:55.125] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTU5LCJpYXQiOjE0OTU2ODYzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.K49rovMfzgBRRQeD-Ju2883PIyAp_GtTs0knJrrcA2I
[2017-05-25 04:25:55.125] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495689959,
  iat: 1495686359,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:25:55.346] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 04:25:55.358] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:25:55.360] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:25:57.096] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 04:25:57.098] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:25:57.099] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:25:58.768] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:26:04.302Z',
     createdOn: 1495686364302,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686364302,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:26:00.619] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:26:06.224Z',
     createdOn: 1495686366224,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686366224,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:26:16.963] [DEBUG] AppRouter - inside callback
[2017-05-25 04:26:16.963] [DEBUG] Controller - Auth Code:  4b955d50865cc260b2628d94a80dc0cd
[2017-05-25 04:26:16.964] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '4b955d50865cc260b2628d94a80dc0cd',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 04:26:16.965] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 04:26:20.429] [DEBUG] Controller - after making call {"access_token":"d50a986f8d845301c7a8bac769fce48a","token_type":"Bearer","expires_in":3600,"refresh_token":"3bb8039c9ff9e1e0381f0ed9542331ee","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTg2LCJpYXQiOjE0OTU2ODYzODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.tq21-dC-y3kRArVVCpX0x7cUW4OiaGPlAjiO04Kpprk"}
[2017-05-25 04:26:20.438] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'billavaa@gmail.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTg2LCJpYXQiOjE0OTU2ODYzODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.tq21-dC-y3kRArVVCpX0x7cUW4OiaGPlAjiO04Kpprk',
  _refresh_token: '3bb8039c9ff9e1e0381f0ed9542331ee' }
[2017-05-25 04:26:20.439] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTg2LCJpYXQiOjE0OTU2ODYzODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.tq21-dC-y3kRArVVCpX0x7cUW4OiaGPlAjiO04Kpprk
[2017-05-25 04:26:20.440] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 04:26:22.157] [DEBUG] AppRouter - inside user router
[2017-05-25 04:26:22.158] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:26:22.158] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njg5OTg2LCJpYXQiOjE0OTU2ODYzODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.tq21-dC-y3kRArVVCpX0x7cUW4OiaGPlAjiO04Kpprk
[2017-05-25 04:26:22.159] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495689986,
  iat: 1495686386,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:26:22.326] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 04:26:22.329] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:26:22.329] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:26:22.547] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 04:26:22.548] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:26:22.548] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:26:25.410] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:26:30.978Z',
     createdOn: 1495686390978,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686390978,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:26:25.820] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:26:31.389Z',
     createdOn: 1495686391389,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686391389,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:31:16.217] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-25 04:31:29.249] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569' }
[2017-05-25 04:31:29.258] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:31:29.259] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:31:32.925] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:31:38.268Z',
     createdOn: 1495686698268,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686698268,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:31:41.390] [DEBUG] AppRouter - inside callback
[2017-05-25 04:31:41.391] [DEBUG] Controller - Auth Code:  d29f01111d7629511bac2de6c86bed18
[2017-05-25 04:31:41.391] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'd29f01111d7629511bac2de6c86bed18',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 04:31:41.392] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 04:31:44.925] [DEBUG] Controller - after making call {"access_token":"70b8be94ab3088117cef762b0c9ebd55","token_type":"Bearer","expires_in":3600,"refresh_token":"409259b65b5ba753c0487fb6e2a8ee9f","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwMzEwLCJpYXQiOjE0OTU2ODY3MTAsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.4uH_uAMifQMHQlzrq3SkXejvz5hOlHTq_LyJ9zq1DEg"}
[2017-05-25 04:31:44.939] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'billavaa@gmail.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwMzEwLCJpYXQiOjE0OTU2ODY3MTAsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.4uH_uAMifQMHQlzrq3SkXejvz5hOlHTq_LyJ9zq1DEg',
  _refresh_token: '409259b65b5ba753c0487fb6e2a8ee9f' }
[2017-05-25 04:31:44.940] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwMzEwLCJpYXQiOjE0OTU2ODY3MTAsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.4uH_uAMifQMHQlzrq3SkXejvz5hOlHTq_LyJ9zq1DEg
[2017-05-25 04:31:44.941] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 04:31:46.514] [DEBUG] AppRouter - inside user router
[2017-05-25 04:31:46.516] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:31:46.516] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwMzEwLCJpYXQiOjE0OTU2ODY3MTAsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.4uH_uAMifQMHQlzrq3SkXejvz5hOlHTq_LyJ9zq1DEg
[2017-05-25 04:31:46.517] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495690310,
  iat: 1495686710,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:31:46.635] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 04:31:46.642] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:31:46.643] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:31:46.931] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 04:31:46.933] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:31:46.934] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:31:49.717] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:31:55.124Z',
     createdOn: 1495686715124,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686715124,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:31:49.721] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:31:55.126Z',
     createdOn: 1495686715126,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686715126,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:32:25.211] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569' }
[2017-05-25 04:32:25.212] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:32:25.212] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:32:36.149] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:32:41.322Z',
     createdOn: 1495686761322,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686761322,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:34:37.924] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-05-25 04:35:05.560] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569' }
[2017-05-25 04:35:05.572] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:35:05.572] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:35:09.246] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:35:14.487Z',
     createdOn: 1495686914487,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495686914487,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:35:16.172] [DEBUG] AppRouter - inside callback
[2017-05-25 04:35:16.172] [DEBUG] Controller - Auth Code:  1b2556d7540a7059279eec81ab63f6e1
[2017-05-25 04:35:16.173] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '1b2556d7540a7059279eec81ab63f6e1',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 04:35:16.173] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 04:35:19.645] [DEBUG] Controller - after making call {"access_token":"024dd403b909fa8a64bdf06fc0e1a02c","token_type":"Bearer","expires_in":3600,"refresh_token":"3239c0a3e191cc81bbc8fdd83046038e","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwNTI1LCJpYXQiOjE0OTU2ODY5MjUsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.UqSBUpmaBwGPB0flXDModOrZs2zpU2b4bCPgsU8Lnk0"}
[2017-05-25 04:35:19.656] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'billavaa@gmail.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwNTI1LCJpYXQiOjE0OTU2ODY5MjUsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.UqSBUpmaBwGPB0flXDModOrZs2zpU2b4bCPgsU8Lnk0',
  _refresh_token: '3239c0a3e191cc81bbc8fdd83046038e' }
[2017-05-25 04:35:19.658] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwNTI1LCJpYXQiOjE0OTU2ODY5MjUsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.UqSBUpmaBwGPB0flXDModOrZs2zpU2b4bCPgsU8Lnk0
[2017-05-25 04:35:19.659] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 04:35:21.173] [DEBUG] AppRouter - inside user router
[2017-05-25 04:35:21.176] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:35:21.176] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwNTI1LCJpYXQiOjE0OTU2ODY5MjUsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.UqSBUpmaBwGPB0flXDModOrZs2zpU2b4bCPgsU8Lnk0
[2017-05-25 04:35:21.177] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495690525,
  iat: 1495686925,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:35:21.586] [DEBUG] AppRouter - inside user router
[2017-05-25 04:35:21.589] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:35:21.589] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkwNTI1LCJpYXQiOjE0OTU2ODY5MjUsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.UqSBUpmaBwGPB0flXDModOrZs2zpU2b4bCPgsU8Lnk0
[2017-05-25 04:35:21.591] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495690525,
  iat: 1495686925,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:36:53.528] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '158', isadmin: 'true' }
[2017-05-25 04:36:53.529] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:36:53.529] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:36:56.021] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:37:01.135Z',
     createdOn: 1495687021135,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495687021135,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:43:31.623] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '158', isadmin: 'true', party_id: '569' }
[2017-05-25 04:43:31.624] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:43:31.625] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:43:33.208] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:43:38.106Z',
     createdOn: 1495687418106,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495687418106,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:56:45.192] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '158', isadmin: 'true', party_id: '569' }
[2017-05-25 04:56:45.193] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:56:45.193] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:56:47.186] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:56:52.525Z',
     createdOn: 1495688212525,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495688212525,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:56:58.913] [DEBUG] AppRouter - inside callback
[2017-05-25 04:56:58.913] [DEBUG] Controller - Auth Code:  8345156bebb149f50266c6051099d9e8
[2017-05-25 04:56:58.913] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '8345156bebb149f50266c6051099d9e8',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 04:56:58.914] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 04:57:00.761] [DEBUG] Controller - after making call {"access_token":"39a609f72730976253c73e7181df574a","token_type":"Bearer","expires_in":3600,"refresh_token":"41f1cce54ec52213dad2cc07e5e1b277","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODI2LCJpYXQiOjE0OTU2ODgyMjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.mPa4JzrFJ-ksaRXgXbBIBhEc1JnOF9EEbKnMRzM9yb0"}
[2017-05-25 04:57:00.772] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '158',
  isadmin: 'true',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODI2LCJpYXQiOjE0OTU2ODgyMjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.mPa4JzrFJ-ksaRXgXbBIBhEc1JnOF9EEbKnMRzM9yb0',
  _refresh_token: '41f1cce54ec52213dad2cc07e5e1b277' }
[2017-05-25 04:57:00.773] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODI2LCJpYXQiOjE0OTU2ODgyMjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.mPa4JzrFJ-ksaRXgXbBIBhEc1JnOF9EEbKnMRzM9yb0
[2017-05-25 04:57:00.774] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 04:57:02.324] [DEBUG] AppRouter - inside user router
[2017-05-25 04:57:02.327] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:57:02.327] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODI2LCJpYXQiOjE0OTU2ODgyMjYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.mPa4JzrFJ-ksaRXgXbBIBhEc1JnOF9EEbKnMRzM9yb0
[2017-05-25 04:57:02.328] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495691826,
  iat: 1495688226,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:57:23.853] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '156', isadmin: 'false' }
[2017-05-25 04:57:23.854] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:57:23.855] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:57:26.292] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:57:31.610Z',
     createdOn: 1495688251610,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495688251610,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:57:58.424] [DEBUG] AppRouter - inside callback
[2017-05-25 04:57:58.425] [DEBUG] Controller - Auth Code:  1464353b725e04886d3bed2187735cea
[2017-05-25 04:57:58.426] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '1464353b725e04886d3bed2187735cea',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 04:57:58.426] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 04:58:00.466] [DEBUG] Controller - after making call {"access_token":"2710f40883923a0a41a7c52a23e244c8","token_type":"Bearer","expires_in":3600,"refresh_token":"4bae775611f7f9c1dc8ac33d87efd0dc","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODg2LCJpYXQiOjE0OTU2ODgyODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.POmWgCJnmhgUJ4h8YJund1eAfGL6k1T9Qd06ydKQ0sc"}
[2017-05-25 04:58:00.472] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '156',
  isadmin: 'false',
  party_id: '569',
  email: 'billavaa@gmail.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODg2LCJpYXQiOjE0OTU2ODgyODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.POmWgCJnmhgUJ4h8YJund1eAfGL6k1T9Qd06ydKQ0sc',
  _refresh_token: '4bae775611f7f9c1dc8ac33d87efd0dc' }
[2017-05-25 04:58:00.486] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODg2LCJpYXQiOjE0OTU2ODgyODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.POmWgCJnmhgUJ4h8YJund1eAfGL6k1T9Qd06ydKQ0sc
[2017-05-25 04:58:00.486] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 04:58:02.168] [DEBUG] AppRouter - inside user router
[2017-05-25 04:58:02.168] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:58:02.168] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODg2LCJpYXQiOjE0OTU2ODgyODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.POmWgCJnmhgUJ4h8YJund1eAfGL6k1T9Qd06ydKQ0sc
[2017-05-25 04:58:02.168] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495691886,
  iat: 1495688286,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:58:02.270] [DEBUG] AppRouter - inside user router
[2017-05-25 04:58:02.271] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:58:02.271] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxODg2LCJpYXQiOjE0OTU2ODgyODYsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.POmWgCJnmhgUJ4h8YJund1eAfGL6k1T9Qd06ydKQ0sc
[2017-05-25 04:58:02.271] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '591587e78ba3cb1000ebf702',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495691886,
  iat: 1495688286,
  user: 
   { _id: '591587e78ba3cb1000ebf702',
     username: 'billavaa@gmail.com',
     firstName: 'arun billava',
     email: 'billavaa@gmail.com',
     createdOn: 1494583271596,
     displayName: 'arun billava',
     isValidated: true,
     hasAcceptedTerms: false,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 04:58:31.608] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '158', isadmin: 'true' }
[2017-05-25 04:58:31.614] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 04:58:31.615] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 04:58:34.700] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T04:58:39.990Z',
     createdOn: 1495688319990,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495688319990,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 04:58:42.517] [DEBUG] AppRouter - inside callback
[2017-05-25 04:58:42.518] [DEBUG] Controller - Auth Code:  c56e53e8ed20c752de80a30d4296be11
[2017-05-25 04:58:42.518] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'c56e53e8ed20c752de80a30d4296be11',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 04:58:42.518] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 04:58:44.913] [DEBUG] Controller - after making call {"access_token":"5614bd0c056076fa417d1fc943b2f8dd","token_type":"Bearer","expires_in":3600,"refresh_token":"87c0461e703520ee3e2e7f523b70fc56","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM"}
[2017-05-25 04:58:44.920] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '158',
  isadmin: 'true',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM',
  _refresh_token: '87c0461e703520ee3e2e7f523b70fc56' }
[2017-05-25 04:58:44.921] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM
[2017-05-25 04:58:44.922] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 04:58:46.413] [DEBUG] AppRouter - inside user router
[2017-05-25 04:58:46.413] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 04:58:46.413] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM
[2017-05-25 04:58:46.415] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495691930,
  iat: 1495688330,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 05:00:57.919] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '156',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM',
  _refresh_token: '87c0461e703520ee3e2e7f523b70fc56',
  _ga: 'GA1.1.372664692.1495688325',
  _gid: 'GA1.1.640524487.1495688325' }
[2017-05-25 05:00:57.921] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM
[2017-05-25 05:00:57.922] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 05:00:59.639] [DEBUG] AppRouter - inside user router
[2017-05-25 05:00:59.640] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 05:00:59.640] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM
[2017-05-25 05:00:59.641] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495691930,
  iat: 1495688330,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 05:48:27.786] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 05:48:27.788] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 05:48:27.789] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 05:48:31.314] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T05:48:35.607Z',
     createdOn: 1495691315607,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495691315607,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 05:50:48.248] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 05:50:48.249] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 05:50:48.249] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 05:50:50.004] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T05:50:55.380Z',
     createdOn: 1495691455380,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495691455380,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 05:52:43.832] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 05:52:43.834] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 05:52:43.834] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 05:52:46.833] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T05:52:51.555Z',
     createdOn: 1495691571555,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495691571555,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 05:53:02.709] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569' }
[2017-05-25 05:53:02.711] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 05:53:02.711] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 05:53:05.189] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T05:53:10.362Z',
     createdOn: 1495691590362,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495691590362,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 05:53:09.623] [DEBUG] AppRouter - inside callback
[2017-05-25 05:53:09.623] [DEBUG] Controller - Auth Code:  506bbcd7199918d6137eeb3400de5fe8
[2017-05-25 05:53:09.624] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '506bbcd7199918d6137eeb3400de5fe8',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 05:53:09.625] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 05:53:12.411] [DEBUG] Controller - after making call {"access_token":"3d40cb89fe7a99a548e07be95339ade5","token_type":"Bearer","expires_in":3600,"refresh_token":"93d38976f7a24fd9221e5575c13705cf","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1MTk4LCJpYXQiOjE0OTU2OTE1OTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.LSUs3eEs9vlGzn9HFUXnHsXGmx_4Q3liR2QkX_FMNcU"}
[2017-05-25 05:53:12.416] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1MTk4LCJpYXQiOjE0OTU2OTE1OTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.LSUs3eEs9vlGzn9HFUXnHsXGmx_4Q3liR2QkX_FMNcU',
  _refresh_token: '93d38976f7a24fd9221e5575c13705cf' }
[2017-05-25 05:53:12.416] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1MTk4LCJpYXQiOjE0OTU2OTE1OTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.LSUs3eEs9vlGzn9HFUXnHsXGmx_4Q3liR2QkX_FMNcU
[2017-05-25 05:53:12.417] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 05:53:15.661] [DEBUG] AppRouter - inside user router
[2017-05-25 05:53:15.662] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 05:53:15.662] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1MTk4LCJpYXQiOjE0OTU2OTE1OTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.LSUs3eEs9vlGzn9HFUXnHsXGmx_4Q3liR2QkX_FMNcU
[2017-05-25 05:53:15.663] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495695198,
  iat: 1495691598,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 05:53:53.136] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '156',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM',
  _refresh_token: '87c0461e703520ee3e2e7f523b70fc56',
  _ga: 'GA1.1.372664692.1495688325',
  _gid: 'GA1.1.1493011754.1495688458' }
[2017-05-25 05:53:53.137] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM
[2017-05-25 05:53:53.138] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 05:53:55.205] [DEBUG] AppRouter - inside user router
[2017-05-25 05:53:55.206] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 05:53:55.207] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NjkxOTMwLCJpYXQiOjE0OTU2ODgzMzAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.GNNs5necBqOqC4TqD8_7cIzuaJNZ2DfpKGGPgYS0mBM
[2017-05-25 05:53:55.207] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495691930,
  iat: 1495688330,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 05:55:45.543] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 05:55:45.545] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 05:55:45.545] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 05:55:47.476] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T05:55:52.819Z',
     createdOn: 1495691752819,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495691752819,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 05:56:13.144] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569' }
[2017-05-25 05:56:13.145] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 05:56:13.146] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 05:56:15.105] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T05:56:20.284Z',
     createdOn: 1495691780284,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495691780284,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 05:56:19.851] [DEBUG] AppRouter - inside callback
[2017-05-25 05:56:19.860] [DEBUG] Controller - Auth Code:  22dbdf62bab2d61844f067aa99228ad3
[2017-05-25 05:56:19.860] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '22dbdf62bab2d61844f067aa99228ad3',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 05:56:19.861] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 05:56:21.601] [DEBUG] Controller - after making call {"access_token":"f39120f944eece618c7825185f270fc1","token_type":"Bearer","expires_in":3600,"refresh_token":"51f4dddbe75e65c4828c05171d11cfda","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1Mzg3LCJpYXQiOjE0OTU2OTE3ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.cVfHc4o2Zs_XJuhfRaUOK0EN5hmaJBBPnHi7WsMe514"}
[2017-05-25 05:56:21.607] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1Mzg3LCJpYXQiOjE0OTU2OTE3ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.cVfHc4o2Zs_XJuhfRaUOK0EN5hmaJBBPnHi7WsMe514',
  _refresh_token: '51f4dddbe75e65c4828c05171d11cfda' }
[2017-05-25 05:56:21.607] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1Mzg3LCJpYXQiOjE0OTU2OTE3ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.cVfHc4o2Zs_XJuhfRaUOK0EN5hmaJBBPnHi7WsMe514
[2017-05-25 05:56:21.608] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 05:56:25.556] [DEBUG] AppRouter - inside user router
[2017-05-25 05:56:25.556] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 05:56:25.556] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1Mzg3LCJpYXQiOjE0OTU2OTE3ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.cVfHc4o2Zs_XJuhfRaUOK0EN5hmaJBBPnHi7WsMe514
[2017-05-25 05:56:25.556] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495695387,
  iat: 1495691787,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 06:05:20.865] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-05-25 06:05:20.866] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 06:05:20.866] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 06:05:23.314] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T06:05:28.687Z',
     createdOn: 1495692328687,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495692328687,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 06:05:43.979] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569' }
[2017-05-25 06:05:43.981] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-25 06:05:43.981] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-25 06:05:46.431] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-25T06:05:51.713Z',
     createdOn: 1495692351713,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495692351713,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-25 06:05:51.525] [DEBUG] AppRouter - inside callback
[2017-05-25 06:05:51.526] [DEBUG] Controller - Auth Code:  5c37d2594d7388cca9e9db22d75675fc
[2017-05-25 06:05:51.526] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '5c37d2594d7388cca9e9db22d75675fc',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-25 06:05:51.526] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-25 06:05:53.732] [DEBUG] Controller - after making call {"access_token":"df64250d499d106b98b9f09270b469d0","token_type":"Bearer","expires_in":3600,"refresh_token":"25a5a9e68967a92dd68b5544bfab8b22","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1OTU5LCJpYXQiOjE0OTU2OTIzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.9QzGIx-N6BjdZ4aGiNcZLjOsOlheJDa0r5eoGWJaCvQ"}
[2017-05-25 06:05:53.737] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1OTU5LCJpYXQiOjE0OTU2OTIzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.9QzGIx-N6BjdZ4aGiNcZLjOsOlheJDa0r5eoGWJaCvQ',
  _refresh_token: '25a5a9e68967a92dd68b5544bfab8b22' }
[2017-05-25 06:05:53.737] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1OTU5LCJpYXQiOjE0OTU2OTIzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.9QzGIx-N6BjdZ4aGiNcZLjOsOlheJDa0r5eoGWJaCvQ
[2017-05-25 06:05:53.738] [DEBUG] Controller - Controller : allowAccess
[2017-05-25 06:05:57.275] [DEBUG] AppRouter - inside user router
[2017-05-25 06:05:57.279] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-25 06:05:57.279] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1OTU5LCJpYXQiOjE0OTU2OTIzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.9QzGIx-N6BjdZ4aGiNcZLjOsOlheJDa0r5eoGWJaCvQ
[2017-05-25 06:05:57.279] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495695959,
  iat: 1495692359,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-25 06:05:59.496] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '156',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1OTU5LCJpYXQiOjE0OTU2OTIzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.9QzGIx-N6BjdZ4aGiNcZLjOsOlheJDa0r5eoGWJaCvQ',
  _refresh_token: '25a5a9e68967a92dd68b5544bfab8b22',
  _ga: 'GA1.1.1271394571.1495692358',
  _gid: 'GA1.1.128286081.1495692358',
  _gat: '1' }
[2017-05-25 06:05:59.498] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1Njk1OTU5LCJpYXQiOjE0OTU2OTIzNTksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.9QzGIx-N6BjdZ4aGiNcZLjOsOlheJDa0r5eoGWJaCvQ
