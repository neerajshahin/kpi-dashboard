[2017-05-22 10:57:45.799] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:57:49.359Z',
     createdOn: 1495450669359,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450669359,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:02.696] [DEBUG] AppRouter - inside callback
[2017-05-22 10:58:02.696] [DEBUG] Controller - Auth Code:  d694847d46c0e3688789e7856b7d2272
[2017-05-22 10:58:02.696] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'd694847d46c0e3688789e7856b7d2272',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 10:58:02.697] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 10:58:03.780] [DEBUG] Controller - after making call access token {"access_token":"2b2bb4c7d0504575589e58068b7d046b","token_type":"Bearer","expires_in":3600,"refresh_token":"08f1a3f658c14d9f178cc7ba2a402c66","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Mjg3LCJpYXQiOjE0OTU0NTA2ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.RE-OsoTnp7lB9esxf-a_yTI8k0zugyfPTAgBxau8jeA"}
[2017-05-22 10:58:03.780] [DEBUG] Controller - after making call access token error null
[2017-05-22 10:58:03.788] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Mjg3LCJpYXQiOjE0OTU0NTA2ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.RE-OsoTnp7lB9esxf-a_yTI8k0zugyfPTAgBxau8jeA',
  _refresh_token: '08f1a3f658c14d9f178cc7ba2a402c66' }
[2017-05-22 10:58:03.789] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Mjg3LCJpYXQiOjE0OTU0NTA2ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.RE-OsoTnp7lB9esxf-a_yTI8k0zugyfPTAgBxau8jeA
[2017-05-22 10:58:03.790] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 10:58:08.626] [DEBUG] AppRouter - inside user router
[2017-05-22 10:58:08.627] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 10:58:08.627] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Mjg3LCJpYXQiOjE0OTU0NTA2ODcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.RE-OsoTnp7lB9esxf-a_yTI8k0zugyfPTAgBxau8jeA
[2017-05-22 10:58:08.627] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454287,
  iat: 1495450687,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 10:58:09.480] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:09.481] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:09.482] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:09.864] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:09.865] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:09.865] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:10.853] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:58:14.457Z',
     createdOn: 1495450694457,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450694457,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:10.902] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:58:14.455Z',
     createdOn: 1495450694455,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450694455,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:18.165] [DEBUG] AppRouter - inside callback
[2017-05-22 10:58:18.166] [DEBUG] Controller - Auth Code:  d31032509ce7c7a8b1d7fe460507db30
[2017-05-22 10:58:18.166] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'd31032509ce7c7a8b1d7fe460507db30',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 10:58:18.167] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 10:58:19.165] [DEBUG] Controller - after making call access token {"access_token":"f32f118e31f82bd5945b3cf58b92044b","token_type":"Bearer","expires_in":3600,"refresh_token":"37dadfb7ef46041dd344bd2e4a544b35","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzAzLCJpYXQiOjE0OTU0NTA3MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.f_hy6TfnVBb_jS03g4wFNotFZUyNCPJ6p5JUYnGlcdo"}
[2017-05-22 10:58:19.165] [DEBUG] Controller - after making call access token error null
[2017-05-22 10:58:19.177] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzAzLCJpYXQiOjE0OTU0NTA3MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.f_hy6TfnVBb_jS03g4wFNotFZUyNCPJ6p5JUYnGlcdo',
  _refresh_token: '37dadfb7ef46041dd344bd2e4a544b35' }
[2017-05-22 10:58:19.177] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzAzLCJpYXQiOjE0OTU0NTA3MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.f_hy6TfnVBb_jS03g4wFNotFZUyNCPJ6p5JUYnGlcdo
[2017-05-22 10:58:19.178] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 10:58:23.787] [DEBUG] AppRouter - inside user router
[2017-05-22 10:58:23.787] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 10:58:23.788] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzAzLCJpYXQiOjE0OTU0NTA3MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.f_hy6TfnVBb_jS03g4wFNotFZUyNCPJ6p5JUYnGlcdo
[2017-05-22 10:58:23.788] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454303,
  iat: 1495450703,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 10:58:24.902] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:24.916] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:24.916] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:25.064] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:25.066] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:25.067] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:26.170] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:58:29.778Z',
     createdOn: 1495450709778,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450709778,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:26.176] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:58:29.777Z',
     createdOn: 1495450709777,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450709777,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:31.256] [DEBUG] AppRouter - inside callback
[2017-05-22 10:58:31.256] [DEBUG] Controller - Auth Code:  68f50302d121f63c3434c470043a745b
[2017-05-22 10:58:31.257] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '68f50302d121f63c3434c470043a745b',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 10:58:31.257] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 10:58:32.405] [DEBUG] Controller - after making call access token {"access_token":"fbc6a912c69cd282f19d46311279b086","token_type":"Bearer","expires_in":3600,"refresh_token":"3e51cbe7498005da3477fc797c3519ad","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzE2LCJpYXQiOjE0OTU0NTA3MTYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.iRzce41ng3-o38GzXU-ECajvRD8BsOkjZgRVH7vEQPI"}
[2017-05-22 10:58:32.406] [DEBUG] Controller - after making call access token error null
[2017-05-22 10:58:32.416] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzE2LCJpYXQiOjE0OTU0NTA3MTYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.iRzce41ng3-o38GzXU-ECajvRD8BsOkjZgRVH7vEQPI',
  _refresh_token: '3e51cbe7498005da3477fc797c3519ad' }
[2017-05-22 10:58:32.416] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzE2LCJpYXQiOjE0OTU0NTA3MTYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.iRzce41ng3-o38GzXU-ECajvRD8BsOkjZgRVH7vEQPI
[2017-05-22 10:58:32.417] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 10:58:36.889] [DEBUG] AppRouter - inside user router
[2017-05-22 10:58:36.892] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 10:58:36.892] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzE2LCJpYXQiOjE0OTU0NTA3MTYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.iRzce41ng3-o38GzXU-ECajvRD8BsOkjZgRVH7vEQPI
[2017-05-22 10:58:36.893] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454316,
  iat: 1495450716,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 10:58:38.829] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:38.829] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:38.829] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:39.201] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:39.203] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:39.203] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:40.241] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:58:43.865Z',
     createdOn: 1495450723865,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450723865,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:40.361] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:58:43.982Z',
     createdOn: 1495450723982,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450723982,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:48.681] [DEBUG] AppRouter - inside callback
[2017-05-22 10:58:48.681] [DEBUG] Controller - Auth Code:  c6814774bbbd05a9f88135168678bd30
[2017-05-22 10:58:48.681] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'c6814774bbbd05a9f88135168678bd30',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 10:58:48.681] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 10:58:49.868] [DEBUG] Controller - after making call access token {"access_token":"3c938a19022378c3fd00fd78a6daa106","token_type":"Bearer","expires_in":3600,"refresh_token":"ee3baaafc149d41bc5d1b781a1939a1a","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzM0LCJpYXQiOjE0OTU0NTA3MzQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.CQGBUnn0JYHn3nDwcNMpOuZHOCwTb6JEIwVp87ZJYk4"}
[2017-05-22 10:58:49.868] [DEBUG] Controller - after making call access token error null
[2017-05-22 10:58:49.878] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzM0LCJpYXQiOjE0OTU0NTA3MzQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.CQGBUnn0JYHn3nDwcNMpOuZHOCwTb6JEIwVp87ZJYk4',
  _refresh_token: 'ee3baaafc149d41bc5d1b781a1939a1a' }
[2017-05-22 10:58:49.879] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzM0LCJpYXQiOjE0OTU0NTA3MzQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.CQGBUnn0JYHn3nDwcNMpOuZHOCwTb6JEIwVp87ZJYk4
[2017-05-22 10:58:49.880] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 10:58:56.248] [DEBUG] AppRouter - inside user router
[2017-05-22 10:58:56.248] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 10:58:56.248] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0MzM0LCJpYXQiOjE0OTU0NTA3MzQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.CQGBUnn0JYHn3nDwcNMpOuZHOCwTb6JEIwVp87ZJYk4
[2017-05-22 10:58:56.249] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454334,
  iat: 1495450734,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 10:58:57.579] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:57.579] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:57.580] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:57.962] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 10:58:57.964] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 10:58:57.964] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 10:58:59.053] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:59:02.628Z',
     createdOn: 1495450742628,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450742628,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:58:59.518] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T10:59:02.799Z',
     createdOn: 1495450742799,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450742799,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 10:59:47.634] [DEBUG] AppRouter - inside callback
[2017-05-22 10:59:47.635] [DEBUG] Controller - Auth Code:  df4924236ca5e00134a450fa3b9fc6c9
[2017-05-22 10:59:47.635] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'df4924236ca5e00134a450fa3b9fc6c9',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 10:59:47.635] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 10:59:58.824] [DEBUG] Controller - after making call access token {"access_token":"7ba58d02433650db48222bc673fca314","token_type":"Bearer","expires_in":3600,"refresh_token":"7957ebf229e7a3d8c8f9fdbcfcea4968","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDAzLCJpYXQiOjE0OTU0NTA4MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UsLUmbODzs9qWGriw1DnmgLZi7tnUBKhW4HBxx4KmkE"}
[2017-05-22 10:59:58.824] [DEBUG] Controller - after making call access token error null
[2017-05-22 10:59:58.840] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDAzLCJpYXQiOjE0OTU0NTA4MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UsLUmbODzs9qWGriw1DnmgLZi7tnUBKhW4HBxx4KmkE',
  _refresh_token: '7957ebf229e7a3d8c8f9fdbcfcea4968' }
[2017-05-22 10:59:58.840] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDAzLCJpYXQiOjE0OTU0NTA4MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UsLUmbODzs9qWGriw1DnmgLZi7tnUBKhW4HBxx4KmkE
[2017-05-22 10:59:58.841] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:00:10.043] [DEBUG] AppRouter - inside user router
[2017-05-22 11:00:10.044] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:00:10.044] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDAzLCJpYXQiOjE0OTU0NTA4MDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UsLUmbODzs9qWGriw1DnmgLZi7tnUBKhW4HBxx4KmkE
[2017-05-22 11:00:10.044] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454403,
  iat: 1495450803,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:00:26.805] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:00:26.805] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:00:26.806] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:00:27.198] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:00:27.198] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:00:27.199] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:00:27.882] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:00:31.485Z',
     createdOn: 1495450831485,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450831485,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:00:27.952] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:00:31.574Z',
     createdOn: 1495450831574,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450831574,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:01:16.797] [DEBUG] AppRouter - inside callback
[2017-05-22 11:01:16.797] [DEBUG] Controller - Auth Code:  cf7ff1b1e1bce5096e975511d4cf3dca
[2017-05-22 11:01:16.797] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'cf7ff1b1e1bce5096e975511d4cf3dca',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:01:16.798] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:01:19.029] [DEBUG] Controller - after making call access token {"access_token":"6e72e5e87b77d4f719434e1e75bed063","token_type":"Bearer","expires_in":3600,"refresh_token":"bb73a17bc43d5916a42bdffcb032332b","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDgzLCJpYXQiOjE0OTU0NTA4ODMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.XKhCgl3Iv4zJa8cDZEcc5sGrb-YLAtzi-LMM5kZn8TU"}
[2017-05-22 11:01:19.030] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:01:19.038] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDgzLCJpYXQiOjE0OTU0NTA4ODMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.XKhCgl3Iv4zJa8cDZEcc5sGrb-YLAtzi-LMM5kZn8TU',
  _refresh_token: 'bb73a17bc43d5916a42bdffcb032332b' }
[2017-05-22 11:01:19.038] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDgzLCJpYXQiOjE0OTU0NTA4ODMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.XKhCgl3Iv4zJa8cDZEcc5sGrb-YLAtzi-LMM5kZn8TU
[2017-05-22 11:01:19.039] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:01:48.932] [DEBUG] AppRouter - inside user router
[2017-05-22 11:01:48.932] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:01:48.932] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NDgzLCJpYXQiOjE0OTU0NTA4ODMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.XKhCgl3Iv4zJa8cDZEcc5sGrb-YLAtzi-LMM5kZn8TU
[2017-05-22 11:01:48.932] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454483,
  iat: 1495450883,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:02:22.844] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:02:22.846] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:02:22.846] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:02:23.938] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:02:23.938] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:02:23.939] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:02:24.274] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:02:27.894Z',
     createdOn: 1495450947894,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450947894,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:02:24.811] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:02:28.440Z',
     createdOn: 1495450948440,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450948440,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:02:52.441] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false', party_id: '569' }
[2017-05-22 11:02:52.441] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:02:52.441] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:02:54.460] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:02:57.260Z',
     createdOn: 1495450977260,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495450977260,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:02:59.992] [DEBUG] AppRouter - inside callback
[2017-05-22 11:02:59.992] [DEBUG] Controller - Auth Code:  96b96af58bd69636c1f3efb91e651ef3
[2017-05-22 11:02:59.992] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '96b96af58bd69636c1f3efb91e651ef3',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:02:59.992] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:03:01.348] [DEBUG] Controller - after making call access token {"access_token":"9dacca848fcc0f48fec5619a5157f9f1","token_type":"Bearer","expires_in":3600,"refresh_token":"a55d8a9da259446df00d298542b7b268","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NTg1LCJpYXQiOjE0OTU0NTA5ODUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1WeY-jTtZRbxDWQOtMo8z82iNCeqQixLVdSCdlSxlqo"}
[2017-05-22 11:03:01.349] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:03:01.362] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NTg1LCJpYXQiOjE0OTU0NTA5ODUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1WeY-jTtZRbxDWQOtMo8z82iNCeqQixLVdSCdlSxlqo',
  _refresh_token: 'a55d8a9da259446df00d298542b7b268' }
[2017-05-22 11:03:01.363] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NTg1LCJpYXQiOjE0OTU0NTA5ODUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1WeY-jTtZRbxDWQOtMo8z82iNCeqQixLVdSCdlSxlqo
[2017-05-22 11:03:01.364] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:03:26.145] [DEBUG] AppRouter - inside user router
[2017-05-22 11:03:26.146] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:03:26.146] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NTg1LCJpYXQiOjE0OTU0NTA5ODUsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1WeY-jTtZRbxDWQOtMo8z82iNCeqQixLVdSCdlSxlqo
[2017-05-22 11:03:26.146] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454585,
  iat: 1495450985,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:03:51.452] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:03:51.452] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:03:51.453] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:03:51.560] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:03:51.561] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:03:51.561] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:03:53.111] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:03:56.676Z',
     createdOn: 1495451036676,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451036676,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:03:53.113] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:03:56.667Z',
     createdOn: 1495451036667,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451036667,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:03:58.268] [DEBUG] AppRouter - inside callback
[2017-05-22 11:03:58.268] [DEBUG] Controller - Auth Code:  72fa8d20c46fb3aa13bc7c1460b991b9
[2017-05-22 11:03:58.269] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '72fa8d20c46fb3aa13bc7c1460b991b9',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:03:58.270] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:03:59.339] [DEBUG] Controller - after making call access token {"access_token":"cf396be37c5669cd7635fa8579dd0c87","token_type":"Bearer","expires_in":3600,"refresh_token":"105ad60dada3f1e1cb56636e8faf56bc","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjQzLCJpYXQiOjE0OTU0NTEwNDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.twog6OTMOuqur6gnaqxm8vuCwkgePZbf172xi6jDSlc"}
[2017-05-22 11:03:59.340] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:03:59.351] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjQzLCJpYXQiOjE0OTU0NTEwNDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.twog6OTMOuqur6gnaqxm8vuCwkgePZbf172xi6jDSlc',
  _refresh_token: '105ad60dada3f1e1cb56636e8faf56bc' }
[2017-05-22 11:03:59.351] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjQzLCJpYXQiOjE0OTU0NTEwNDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.twog6OTMOuqur6gnaqxm8vuCwkgePZbf172xi6jDSlc
[2017-05-22 11:03:59.352] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:04:07.577] [DEBUG] AppRouter - inside user router
[2017-05-22 11:04:07.577] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:04:07.577] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjQzLCJpYXQiOjE0OTU0NTEwNDMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.twog6OTMOuqur6gnaqxm8vuCwkgePZbf172xi6jDSlc
[2017-05-22 11:04:07.578] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454643,
  iat: 1495451043,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:04:07.756] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:04:07.756] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:04:07.757] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:04:07.885] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:04:07.886] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:04:07.886] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:04:14.032] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:04:17.643Z',
     createdOn: 1495451057643,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451057643,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:04:14.040] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:04:17.645Z',
     createdOn: 1495451057645,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451057645,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:04:18.915] [DEBUG] AppRouter - inside callback
[2017-05-22 11:04:18.916] [DEBUG] Controller - Auth Code:  13ebdd04eb76b4d92cbd700e7369eebd
[2017-05-22 11:04:18.916] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '13ebdd04eb76b4d92cbd700e7369eebd',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:04:18.917] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:04:20.266] [DEBUG] Controller - after making call access token {"access_token":"d47c89043ddc430ae998fde009baa1b0","token_type":"Bearer","expires_in":3600,"refresh_token":"637079ea321acaf0d7eff1ed5fb82ed6","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjY0LCJpYXQiOjE0OTU0NTEwNjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ueaokVOyP9Ws3BEhxWpokkjYerOa5RkrxyJDrBoV-OA"}
[2017-05-22 11:04:20.266] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:04:20.276] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjY0LCJpYXQiOjE0OTU0NTEwNjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ueaokVOyP9Ws3BEhxWpokkjYerOa5RkrxyJDrBoV-OA',
  _refresh_token: '637079ea321acaf0d7eff1ed5fb82ed6' }
[2017-05-22 11:04:20.276] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjY0LCJpYXQiOjE0OTU0NTEwNjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ueaokVOyP9Ws3BEhxWpokkjYerOa5RkrxyJDrBoV-OA
[2017-05-22 11:04:20.277] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:04:22.818] [DEBUG] AppRouter - inside user router
[2017-05-22 11:04:22.819] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:04:22.819] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0NjY0LCJpYXQiOjE0OTU0NTEwNjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ueaokVOyP9Ws3BEhxWpokkjYerOa5RkrxyJDrBoV-OA
[2017-05-22 11:04:22.819] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454664,
  iat: 1495451064,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:04:22.981] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:04:22.982] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:04:22.982] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:04:23.152] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:04:23.156] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:04:23.157] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:04:24.065] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:04:27.678Z',
     createdOn: 1495451067678,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451067678,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:04:24.123] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:04:27.749Z',
     createdOn: 1495451067749,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451067749,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:06:11.859] [DEBUG] AppRouter - inside callback
[2017-05-22 11:06:11.860] [DEBUG] Controller - Auth Code:  e0cff1ea4fe529eb9f0e3f4753bc2efe
[2017-05-22 11:06:11.860] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'e0cff1ea4fe529eb9f0e3f4753bc2efe',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:06:11.860] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:06:13.305] [DEBUG] Controller - after making call access token {"access_token":"b317c81a9ae4c91bb71c9060137015f1","token_type":"Bearer","expires_in":3600,"refresh_token":"81a3e7631a24d14aed8582e76c56d4e1","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Nzc3LCJpYXQiOjE0OTU0NTExNzcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ZGRTt3XjPkDqvn5gaL2q_r_V4MipM5l3sP6g73V2fNY"}
[2017-05-22 11:06:13.305] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:06:13.317] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Nzc3LCJpYXQiOjE0OTU0NTExNzcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ZGRTt3XjPkDqvn5gaL2q_r_V4MipM5l3sP6g73V2fNY',
  _refresh_token: '81a3e7631a24d14aed8582e76c56d4e1' }
[2017-05-22 11:06:13.317] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Nzc3LCJpYXQiOjE0OTU0NTExNzcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ZGRTt3XjPkDqvn5gaL2q_r_V4MipM5l3sP6g73V2fNY
[2017-05-22 11:06:13.318] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:06:15.981] [DEBUG] AppRouter - inside user router
[2017-05-22 11:06:15.981] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:06:15.981] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0Nzc3LCJpYXQiOjE0OTU0NTExNzcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.ZGRTt3XjPkDqvn5gaL2q_r_V4MipM5l3sP6g73V2fNY
[2017-05-22 11:06:15.982] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454777,
  iat: 1495451177,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:06:16.510] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:06:16.511] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:06:16.511] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:06:16.571] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:06:16.572] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:06:16.572] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:06:17.781] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:06:21.384Z',
     createdOn: 1495451181384,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451181384,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:06:17.783] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:06:21.382Z',
     createdOn: 1495451181382,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451181382,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:07:35.844] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false', party_id: '569' }
[2017-05-22 11:07:35.845] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:07:35.845] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:07:38.590] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:07:42.176Z',
     createdOn: 1495451262176,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451262177,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:07:44.153] [DEBUG] AppRouter - inside callback
[2017-05-22 11:07:44.153] [DEBUG] Controller - Auth Code:  a4b99025d8ec0978e7f400e2d944a0d4
[2017-05-22 11:07:44.153] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'a4b99025d8ec0978e7f400e2d944a0d4',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:07:44.154] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:07:55.330] [DEBUG] Controller - after making call access token {"access_token":"cc1b34537b12dd145790284f8f417e5e","token_type":"Bearer","expires_in":3600,"refresh_token":"5487e1486ec10d72f92f669cba19015d","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0ODc5LCJpYXQiOjE0OTU0NTEyNzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wgVXN9pbglvrbRGbdg7L4KY4kMWv2NQ2h6EYTysdOw8"}
[2017-05-22 11:07:55.331] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:07:55.338] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0ODc5LCJpYXQiOjE0OTU0NTEyNzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wgVXN9pbglvrbRGbdg7L4KY4kMWv2NQ2h6EYTysdOw8',
  _refresh_token: '5487e1486ec10d72f92f669cba19015d' }
[2017-05-22 11:07:55.339] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0ODc5LCJpYXQiOjE0OTU0NTEyNzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wgVXN9pbglvrbRGbdg7L4KY4kMWv2NQ2h6EYTysdOw8
[2017-05-22 11:07:55.339] [DEBUG] Controller - Controller : allowAccess
[2017-05-22 11:07:58.001] [DEBUG] AppRouter - inside user router
[2017-05-22 11:07:58.001] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-05-22 11:07:58.001] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0ODc5LCJpYXQiOjE0OTU0NTEyNzksInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.wgVXN9pbglvrbRGbdg7L4KY4kMWv2NQ2h6EYTysdOw8
[2017-05-22 11:07:58.002] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorandfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1495454879,
  iat: 1495451279,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-05-22 11:08:07.672] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138', isadmin: 'false' }
[2017-05-22 11:08:07.673] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-05-22 11:08:07.673] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-05-22 11:08:09.083] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-05-22T11:08:12.697Z',
     createdOn: 1495451292697,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1495451292697,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-05-22 11:08:15.667] [DEBUG] AppRouter - inside callback
[2017-05-22 11:08:15.668] [DEBUG] Controller - Auth Code:  7640d2f0dcd8370fabca39ced7dd6e8e
[2017-05-22 11:08:15.668] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '7640d2f0dcd8370fabca39ced7dd6e8e',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-05-22 11:08:15.668] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-05-22 11:08:17.113] [DEBUG] Controller - after making call access token {"access_token":"375be77d37a94c93e7335a8dbe75e062","token_type":"Bearer","expires_in":3600,"refresh_token":"c7c862f5718d5ba75af821459dc5e82b","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTAxLCJpYXQiOjE0OTU0NTEzMDEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.qW6MLxtDLvshrQyCPO6MoTBfMX5d795QmkOQJseyOk0"}
[2017-05-22 11:08:17.114] [DEBUG] Controller - after making call access token error null
[2017-05-22 11:08:17.125] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '138',
  isadmin: 'false',
  party_id: '569',
  email: 'billavaa@gmail.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTAxLCJpYXQiOjE0OTU0NTEzMDEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.qW6MLxtDLvshrQyCPO6MoTBfMX5d795QmkOQJseyOk0',
  _refresh_token: 'c7c862f5718d5ba75af821459dc5e82b' }
[2017-05-22 11:08:17.125] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JhbmRmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OTE1ODdlNzhiYTNjYjEwMDBlYmY3MDIiLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk1NDU0OTAxLCJpYXQiOjE0OTU0NTEzMDEsInVzZXIiOnsiX2lkIjoiNTkxNTg3ZTc4YmEzY2IxMDAwZWJmNzAyIiwidXNlcm5hbWUiOiJiaWxsYXZhYUBnbWFpbC5jb20iLCJmaXJzdE5hbWUiOiJhcnVuIGJpbGxhdmEiLCJlbWFpbCI6ImJpbGxhdmFhQGdtYWlsLmNvbSIsImNyZWF0ZWRPbiI6MTQ5NDU4MzI3MTU5NiwiZGlzcGxheU5hbWUiOiJhcnVuIGJpbGxhdmEiLCJpc1ZhbGlkYXRlZCI6dHJ1ZSwiaGFzQWNjZXB0ZWRUZXJtcyI6ZmFsc2UsIl9fdiI6MCwiYXNzb2NpYXRlZEFjY291bnRzIjpbXSwidXNlclR5cGUiOiJzaG9wcGVyIn0sImlwIjoiIn0.qW6MLxtDLvshrQyCPO6MoTBfMX5d795QmkOQJseyOk0
