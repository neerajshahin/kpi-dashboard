[2017-06-05 10:37:37.269] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 10:37:39.047] [DEBUG] AppRouter - inside user router
[2017-06-05 10:37:39.048] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 10:37:39.049] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU
[2017-06-05 10:37:39.054] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496664491,
  iat: 1496660891,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 10:39:25.146] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '169',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU',
  _refresh_token: 'b65446789227d382e53c8ae496684073',
  _ga: 'GA1.1.1899897942.1496652466',
  _gid: 'GA1.1.1177169911.1496652466' }
[2017-06-05 10:39:25.148] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU
[2017-06-05 10:39:25.150] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 10:39:27.300] [DEBUG] AppRouter - inside user router
[2017-06-05 10:39:27.301] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 10:39:27.301] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU
[2017-06-05 10:39:27.304] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496664491,
  iat: 1496660891,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 10:41:57.084] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 10:41:57.086] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 10:41:57.086] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 10:41:58.987] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T11:19:59.121Z',
     createdOn: 1496661599121,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496661599121,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 10:42:15.939] [DEBUG] AppRouter - inside callback
[2017-06-05 10:42:15.939] [DEBUG] Controller - Auth Code:  6aa5183b08e019b68df149a52e359c6d
[2017-06-05 10:42:15.939] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '6aa5183b08e019b68df149a52e359c6d',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 10:42:15.940] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 10:42:17.990] [DEBUG] Controller - after making call {"access_token":"16c63c17e3ea475a0bd4628dc7b4266b","token_type":"Bearer","expires_in":3600,"refresh_token":"b51ce944565ecf2928e0027259d3aa60","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY1MjE4LCJpYXQiOjE0OTY2NjE2MTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.sWRSIDwT_t0SesbqwaVqLorHLEexj6uXF_WWIJU8TsI"}
[2017-06-05 10:42:17.996] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY1MjE4LCJpYXQiOjE0OTY2NjE2MTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.sWRSIDwT_t0SesbqwaVqLorHLEexj6uXF_WWIJU8TsI',
  _refresh_token: 'b51ce944565ecf2928e0027259d3aa60' }
[2017-06-05 10:42:17.996] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY1MjE4LCJpYXQiOjE0OTY2NjE2MTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.sWRSIDwT_t0SesbqwaVqLorHLEexj6uXF_WWIJU8TsI
[2017-06-05 10:42:17.997] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 10:42:21.357] [DEBUG] AppRouter - inside user router
[2017-06-05 10:42:21.357] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 10:42:21.357] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY1MjE4LCJpYXQiOjE0OTY2NjE2MTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.sWRSIDwT_t0SesbqwaVqLorHLEexj6uXF_WWIJU8TsI
[2017-06-05 10:42:21.357] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496665218,
  iat: 1496661618,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 10:42:28.373] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '169',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY1MjE4LCJpYXQiOjE0OTY2NjE2MTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.sWRSIDwT_t0SesbqwaVqLorHLEexj6uXF_WWIJU8TsI',
  _refresh_token: 'b51ce944565ecf2928e0027259d3aa60',
  _ga: 'GA1.1.1011060319.1496661609',
  _gid: 'GA1.1.82778364.1496661609',
  _gat: '1' }
[2017-06-05 10:42:28.375] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY1MjE4LCJpYXQiOjE0OTY2NjE2MTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.sWRSIDwT_t0SesbqwaVqLorHLEexj6uXF_WWIJU8TsI
[2017-06-05 10:42:28.376] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 10:42:29.963] [DEBUG] AppRouter - inside user router
[2017-06-05 10:42:29.963] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 10:42:29.964] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY1MjE4LCJpYXQiOjE0OTY2NjE2MTgsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.sWRSIDwT_t0SesbqwaVqLorHLEexj6uXF_WWIJU8TsI
[2017-06-05 10:42:29.965] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496665218,
  iat: 1496661618,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:09:49.601] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:09:49.605] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:09:49.605] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:09:51.634] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T11:47:51.742Z',
     createdOn: 1496663271742,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496663271742,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:10:08.994] [DEBUG] AppRouter - inside callback
[2017-06-05 11:10:08.995] [DEBUG] Controller - Auth Code:  fbcc08e5e7292d49952fb306580ac0b6
[2017-06-05 11:10:08.996] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'fbcc08e5e7292d49952fb306580ac0b6',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:10:08.996] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:10:11.081] [DEBUG] Controller - after making call {"access_token":"58871eca50b0edf896c39c2872409553","token_type":"Bearer","expires_in":3600,"refresh_token":"05177895588ef3f8c8ff83ff5bbabbce","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY2ODkxLCJpYXQiOjE0OTY2NjMyOTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.5M6pA09g0pWeUr1WbNJfI1G7LC8pBzcYpkZ9ECXoQ2Y"}
[2017-06-05 11:10:11.086] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY2ODkxLCJpYXQiOjE0OTY2NjMyOTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.5M6pA09g0pWeUr1WbNJfI1G7LC8pBzcYpkZ9ECXoQ2Y',
  _refresh_token: '05177895588ef3f8c8ff83ff5bbabbce' }
[2017-06-05 11:10:11.089] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY2ODkxLCJpYXQiOjE0OTY2NjMyOTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.5M6pA09g0pWeUr1WbNJfI1G7LC8pBzcYpkZ9ECXoQ2Y
[2017-06-05 11:10:11.090] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:10:14.404] [DEBUG] AppRouter - inside user router
[2017-06-05 11:10:14.405] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:10:14.405] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY2ODkxLCJpYXQiOjE0OTY2NjMyOTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.5M6pA09g0pWeUr1WbNJfI1G7LC8pBzcYpkZ9ECXoQ2Y
[2017-06-05 11:10:14.405] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496666891,
  iat: 1496663291,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:10:22.022] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '169',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY2ODkxLCJpYXQiOjE0OTY2NjMyOTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.5M6pA09g0pWeUr1WbNJfI1G7LC8pBzcYpkZ9ECXoQ2Y',
  _refresh_token: '05177895588ef3f8c8ff83ff5bbabbce',
  _ga: 'GA1.1.924233375.1496663282',
  _gid: 'GA1.1.595377950.1496663282',
  _gat: '1' }
[2017-06-05 11:10:22.035] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY2ODkxLCJpYXQiOjE0OTY2NjMyOTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.5M6pA09g0pWeUr1WbNJfI1G7LC8pBzcYpkZ9ECXoQ2Y
[2017-06-05 11:10:22.036] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:10:23.637] [DEBUG] AppRouter - inside user router
[2017-06-05 11:10:23.638] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:10:23.639] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY2ODkxLCJpYXQiOjE0OTY2NjMyOTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.5M6pA09g0pWeUr1WbNJfI1G7LC8pBzcYpkZ9ECXoQ2Y
[2017-06-05 11:10:23.639] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496666891,
  iat: 1496663291,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:11:44.283] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:11:44.285] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:11:44.285] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:11:46.726] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T11:49:46.830Z',
     createdOn: 1496663386830,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496663386830,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:12:07.982] [DEBUG] AppRouter - inside callback
[2017-06-05 11:12:07.982] [DEBUG] Controller - Auth Code:  3e19b019d4b4e96ff45050e1229c4210
[2017-06-05 11:12:07.982] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '3e19b019d4b4e96ff45050e1229c4210',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:12:07.982] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:12:09.617] [DEBUG] Controller - after making call {"access_token":"4877fdc763f9c3df7c56556fb1891b55","token_type":"Bearer","expires_in":3600,"refresh_token":"a1be93ee0acb4020cea070d1f8ff709c","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDEwLCJpYXQiOjE0OTY2NjM0MTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.pzFStMiqJQ_46GtWuzK8wCtxXHTBdLN0ppFP-Nd6cqM"}
[2017-06-05 11:12:09.622] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDEwLCJpYXQiOjE0OTY2NjM0MTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.pzFStMiqJQ_46GtWuzK8wCtxXHTBdLN0ppFP-Nd6cqM',
  _refresh_token: 'a1be93ee0acb4020cea070d1f8ff709c' }
[2017-06-05 11:12:09.623] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDEwLCJpYXQiOjE0OTY2NjM0MTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.pzFStMiqJQ_46GtWuzK8wCtxXHTBdLN0ppFP-Nd6cqM
[2017-06-05 11:12:09.626] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:12:12.899] [DEBUG] AppRouter - inside user router
[2017-06-05 11:12:12.899] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:12:12.900] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDEwLCJpYXQiOjE0OTY2NjM0MTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.pzFStMiqJQ_46GtWuzK8wCtxXHTBdLN0ppFP-Nd6cqM
[2017-06-05 11:12:12.900] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496667010,
  iat: 1496663410,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:12:20.385] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '169',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDEwLCJpYXQiOjE0OTY2NjM0MTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.pzFStMiqJQ_46GtWuzK8wCtxXHTBdLN0ppFP-Nd6cqM',
  _refresh_token: 'a1be93ee0acb4020cea070d1f8ff709c',
  _ga: 'GA1.1.2110663172.1496663400',
  _gid: 'GA1.1.1345779122.1496663400',
  _gat: '1' }
[2017-06-05 11:12:20.385] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDEwLCJpYXQiOjE0OTY2NjM0MTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.pzFStMiqJQ_46GtWuzK8wCtxXHTBdLN0ppFP-Nd6cqM
[2017-06-05 11:12:20.386] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:12:22.000] [DEBUG] AppRouter - inside user router
[2017-06-05 11:12:22.000] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:12:22.001] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDEwLCJpYXQiOjE0OTY2NjM0MTAsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.pzFStMiqJQ_46GtWuzK8wCtxXHTBdLN0ppFP-Nd6cqM
[2017-06-05 11:12:22.001] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496667010,
  iat: 1496663410,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:13:11.901] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:13:11.902] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:13:11.903] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:13:13.763] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T11:51:13.693Z',
     createdOn: 1496663473693,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496663473693,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:13:28.886] [DEBUG] AppRouter - inside callback
[2017-06-05 11:13:28.887] [DEBUG] Controller - Auth Code:  6002a81a53fe92907dced2de2e0ed2a6
[2017-06-05 11:13:28.887] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '6002a81a53fe92907dced2de2e0ed2a6',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:13:28.887] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:13:30.721] [DEBUG] Controller - after making call {"access_token":"3b220757dd49802b7df2340e56044f56","token_type":"Bearer","expires_in":3600,"refresh_token":"dfca1b1a61179be37dad83440f35991e","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDkxLCJpYXQiOjE0OTY2NjM0OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.OmJZ4lpNsn1e0nU_hi54X0gFgQiYraEjngPxXT_FRvc"}
[2017-06-05 11:13:30.729] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDkxLCJpYXQiOjE0OTY2NjM0OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.OmJZ4lpNsn1e0nU_hi54X0gFgQiYraEjngPxXT_FRvc',
  _refresh_token: 'dfca1b1a61179be37dad83440f35991e' }
[2017-06-05 11:13:30.730] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDkxLCJpYXQiOjE0OTY2NjM0OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.OmJZ4lpNsn1e0nU_hi54X0gFgQiYraEjngPxXT_FRvc
[2017-06-05 11:13:30.730] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:13:34.013] [DEBUG] AppRouter - inside user router
[2017-06-05 11:13:34.014] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:13:34.014] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MDkxLCJpYXQiOjE0OTY2NjM0OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.OmJZ4lpNsn1e0nU_hi54X0gFgQiYraEjngPxXT_FRvc
[2017-06-05 11:13:34.014] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496667091,
  iat: 1496663491,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:17:09.882] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:17:09.884] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:17:09.884] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:17:11.547] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T11:55:11.666Z',
     createdOn: 1496663711666,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496663711666,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:17:22.498] [DEBUG] AppRouter - inside callback
[2017-06-05 11:17:22.499] [DEBUG] Controller - Auth Code:  e364efb86ace5cc34ccacea33a11e22c
[2017-06-05 11:17:22.499] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'e364efb86ace5cc34ccacea33a11e22c',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:17:22.500] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:17:23.624] [DEBUG] Controller - after making call {"access_token":"4e779ac05d28df8dbbdd011e83f187aa","token_type":"Bearer","expires_in":3600,"refresh_token":"05163f58481c3086a3f28ce66834c87e","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MzI0LCJpYXQiOjE0OTY2NjM3MjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.tLfyHZlfXXn84ZW8MGs4AgwhnaqbvvStvp5dQPEFUS8"}
[2017-06-05 11:17:23.630] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MzI0LCJpYXQiOjE0OTY2NjM3MjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.tLfyHZlfXXn84ZW8MGs4AgwhnaqbvvStvp5dQPEFUS8',
  _refresh_token: '05163f58481c3086a3f28ce66834c87e' }
[2017-06-05 11:17:23.631] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MzI0LCJpYXQiOjE0OTY2NjM3MjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.tLfyHZlfXXn84ZW8MGs4AgwhnaqbvvStvp5dQPEFUS8
[2017-06-05 11:17:23.631] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:17:26.482] [DEBUG] AppRouter - inside user router
[2017-06-05 11:17:26.483] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:17:26.484] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY3MzI0LCJpYXQiOjE0OTY2NjM3MjQsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.tLfyHZlfXXn84ZW8MGs4AgwhnaqbvvStvp5dQPEFUS8
[2017-06-05 11:17:26.485] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496667324,
  iat: 1496663724,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:21:27.262] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:21:27.264] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:21:27.264] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:21:29.424] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T12:38:47.568Z',
     createdOn: 1496666327568,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496666327568,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:21:46.383] [DEBUG] AppRouter - inside callback
[2017-06-05 11:21:46.383] [DEBUG] Controller - Auth Code:  72c708825b1adc1db799965e90a83cab
[2017-06-05 11:21:46.383] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '72c708825b1adc1db799965e90a83cab',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:21:46.383] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:21:47.486] [DEBUG] Controller - after making call {"access_token":"d1694ab615cc3a87003211dfe58b1a10","token_type":"Bearer","expires_in":3600,"refresh_token":"04bc8d3f2570d007a8bbcd388dfd0094","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY5OTQ2LCJpYXQiOjE0OTY2NjYzNDYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.JaPA3GLQ70yvQjrgcx20_3KQAWnL330QtWehygfFoCM"}
[2017-06-05 11:21:47.491] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY5OTQ2LCJpYXQiOjE0OTY2NjYzNDYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.JaPA3GLQ70yvQjrgcx20_3KQAWnL330QtWehygfFoCM',
  _refresh_token: '04bc8d3f2570d007a8bbcd388dfd0094' }
[2017-06-05 11:21:47.492] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY5OTQ2LCJpYXQiOjE0OTY2NjYzNDYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.JaPA3GLQ70yvQjrgcx20_3KQAWnL330QtWehygfFoCM
[2017-06-05 11:21:47.492] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:21:50.186] [DEBUG] AppRouter - inside user router
[2017-06-05 11:21:50.186] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:21:50.187] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY5OTQ2LCJpYXQiOjE0OTY2NjYzNDYsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.JaPA3GLQ70yvQjrgcx20_3KQAWnL330QtWehygfFoCM
[2017-06-05 11:21:50.187] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496669946,
  iat: 1496666346,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:25:06.556] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '169',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU',
  _refresh_token: 'b65446789227d382e53c8ae496684073',
  _ga: 'GA1.1.1899897942.1496652466',
  _gid: 'GA1.1.1177169911.1496652466' }
[2017-06-05 11:25:06.557] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU
[2017-06-05 11:25:06.557] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:25:08.254] [DEBUG] AppRouter - inside user router
[2017-06-05 11:25:08.254] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:25:08.255] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU
[2017-06-05 11:25:08.256] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496664491,
  iat: 1496660891,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:26:18.130] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:26:18.131] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:26:18.132] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:26:19.745] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T12:43:37.926Z',
     createdOn: 1496666617926,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496666617926,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:26:33.522] [DEBUG] AppRouter - inside callback
[2017-06-05 11:26:33.523] [DEBUG] Controller - Auth Code:  b9701153ec863bdde9e4ced1cc6cdfb9
[2017-06-05 11:26:33.523] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'b9701153ec863bdde9e4ced1cc6cdfb9',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:26:33.523] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:26:35.143] [DEBUG] Controller - after making call {"access_token":"f8f29c8afbd1a06802623bc838d2aee2","token_type":"Bearer","expires_in":3600,"refresh_token":"0d97b32ba95402656b9fa25504a0a146","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwMjMzLCJpYXQiOjE0OTY2NjY2MzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.S7skJ9tghi9DVzRztGPrHPEHdC1GVK3dmw5uDIGLtyo"}
[2017-06-05 11:26:35.147] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwMjMzLCJpYXQiOjE0OTY2NjY2MzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.S7skJ9tghi9DVzRztGPrHPEHdC1GVK3dmw5uDIGLtyo',
  _refresh_token: '0d97b32ba95402656b9fa25504a0a146' }
[2017-06-05 11:26:35.148] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwMjMzLCJpYXQiOjE0OTY2NjY2MzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.S7skJ9tghi9DVzRztGPrHPEHdC1GVK3dmw5uDIGLtyo
[2017-06-05 11:26:35.148] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:26:37.765] [DEBUG] AppRouter - inside user router
[2017-06-05 11:26:37.766] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:26:37.766] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwMjMzLCJpYXQiOjE0OTY2NjY2MzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.S7skJ9tghi9DVzRztGPrHPEHdC1GVK3dmw5uDIGLtyo
[2017-06-05 11:26:37.766] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496670233,
  iat: 1496666633,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:29:56.191] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:29:56.193] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:29:56.193] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:29:58.067] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T12:47:16.194Z',
     createdOn: 1496666836194,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496666836194,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:30:12.253] [DEBUG] AppRouter - inside callback
[2017-06-05 11:30:12.253] [DEBUG] Controller - Auth Code:  9c3e7a71234723016ac663f46cb591b0
[2017-06-05 11:30:12.254] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '9c3e7a71234723016ac663f46cb591b0',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:30:12.255] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:30:13.535] [DEBUG] Controller - after making call {"access_token":"6fb2d5cde678c3922ee182c186b93fce","token_type":"Bearer","expires_in":3600,"refresh_token":"8ce99465aa8ce8c8397d9d36239b0e40","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNDUyLCJpYXQiOjE0OTY2NjY4NTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.g_tk-0JT-pqL0mohxnIv5hpNTdkspxa9Hgmr0tsT2GM"}
[2017-06-05 11:30:13.539] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNDUyLCJpYXQiOjE0OTY2NjY4NTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.g_tk-0JT-pqL0mohxnIv5hpNTdkspxa9Hgmr0tsT2GM',
  _refresh_token: '8ce99465aa8ce8c8397d9d36239b0e40' }
[2017-06-05 11:30:13.540] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNDUyLCJpYXQiOjE0OTY2NjY4NTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.g_tk-0JT-pqL0mohxnIv5hpNTdkspxa9Hgmr0tsT2GM
[2017-06-05 11:30:13.541] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:30:15.964] [DEBUG] AppRouter - inside user router
[2017-06-05 11:30:15.964] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:30:15.964] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNDUyLCJpYXQiOjE0OTY2NjY4NTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.g_tk-0JT-pqL0mohxnIv5hpNTdkspxa9Hgmr0tsT2GM
[2017-06-05 11:30:15.964] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496670452,
  iat: 1496666852,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:31:18.815] [DEBUG] AppRouter - AppRouter : req.cookie { memberid: '169',
  isadmin: 'false',
  party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU',
  _refresh_token: 'b65446789227d382e53c8ae496684073',
  _ga: 'GA1.1.1899897942.1496652466',
  _gid: 'GA1.1.1177169911.1496652466' }
[2017-06-05 11:31:18.816] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU
[2017-06-05 11:31:18.818] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:31:21.217] [DEBUG] AppRouter - inside user router
[2017-06-05 11:31:21.218] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:31:21.218] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjY0NDkxLCJpYXQiOjE0OTY2NjA4OTEsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.UmuHKxeDAPDE8WXzDLp6ncSLYpJYrSI9moUgk2UOffU
[2017-06-05 11:31:21.218] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496664491,
  iat: 1496660891,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:33:20.001] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:33:20.003] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:33:20.003] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:33:21.845] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T12:50:39.916Z',
     createdOn: 1496667039916,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496667039916,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:33:33.280] [DEBUG] AppRouter - inside callback
[2017-06-05 11:33:33.281] [DEBUG] Controller - Auth Code:  78d253179836aaa853fa6f32b7eca50a
[2017-06-05 11:33:33.281] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: '78d253179836aaa853fa6f32b7eca50a',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:33:33.281] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:33:34.239] [DEBUG] Controller - after making call {"access_token":"51d4385f583c48b84ead7b8f6cce2d35","token_type":"Bearer","expires_in":3600,"refresh_token":"faa7a7e77e48d388e9bf0d712e3cfc53","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNjUyLCJpYXQiOjE0OTY2NjcwNTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.spMfWbxzwg684WKeRzEHwTInLTWbK20sYNvriyuJ1g0"}
[2017-06-05 11:33:34.243] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNjUyLCJpYXQiOjE0OTY2NjcwNTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.spMfWbxzwg684WKeRzEHwTInLTWbK20sYNvriyuJ1g0',
  _refresh_token: 'faa7a7e77e48d388e9bf0d712e3cfc53' }
[2017-06-05 11:33:34.244] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNjUyLCJpYXQiOjE0OTY2NjcwNTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.spMfWbxzwg684WKeRzEHwTInLTWbK20sYNvriyuJ1g0
[2017-06-05 11:33:34.244] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:33:36.591] [DEBUG] AppRouter - inside user router
[2017-06-05 11:33:36.591] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:33:36.591] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwNjUyLCJpYXQiOjE0OTY2NjcwNTIsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.spMfWbxzwg684WKeRzEHwTInLTWbK20sYNvriyuJ1g0
[2017-06-05 11:33:36.592] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496670652,
  iat: 1496667052,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:36:33.707] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:36:33.709] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:36:33.710] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:36:35.528] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T12:53:53.612Z',
     createdOn: 1496667233612,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496667233612,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:36:47.837] [DEBUG] AppRouter - inside callback
[2017-06-05 11:36:47.837] [DEBUG] Controller - Auth Code:  b602343bdf98f5417e43a24a5c057ab7
[2017-06-05 11:36:47.837] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'b602343bdf98f5417e43a24a5c057ab7',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:36:47.838] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:36:48.850] [DEBUG] Controller - after making call {"access_token":"6a901a716db4e53982248614b4e12c3c","token_type":"Bearer","expires_in":3600,"refresh_token":"ef1035cfbea5cea2da767904a57ab3a6","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwODQ3LCJpYXQiOjE0OTY2NjcyNDcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1S2TE9BSz67OkMrddpt-JFwpQK2eIF5IdOO5bSyRgAM"}
[2017-06-05 11:36:48.855] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwODQ3LCJpYXQiOjE0OTY2NjcyNDcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1S2TE9BSz67OkMrddpt-JFwpQK2eIF5IdOO5bSyRgAM',
  _refresh_token: 'ef1035cfbea5cea2da767904a57ab3a6' }
[2017-06-05 11:36:48.855] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwODQ3LCJpYXQiOjE0OTY2NjcyNDcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1S2TE9BSz67OkMrddpt-JFwpQK2eIF5IdOO5bSyRgAM
[2017-06-05 11:36:48.856] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:36:51.253] [DEBUG] AppRouter - inside user router
[2017-06-05 11:36:51.253] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:36:51.253] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwODQ3LCJpYXQiOjE0OTY2NjcyNDcsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.1S2TE9BSz67OkMrddpt-JFwpQK2eIF5IdOO5bSyRgAM
[2017-06-05 11:36:51.253] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496670847,
  iat: 1496667247,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 11:37:59.139] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 11:37:59.140] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 11:37:59.140] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 11:38:00.574] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-05T12:55:18.754Z',
     createdOn: 1496667318754,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496667318754,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
[2017-06-05 11:38:13.754] [DEBUG] AppRouter - inside callback
[2017-06-05 11:38:13.754] [DEBUG] Controller - Auth Code:  cfaed409507a461014357a2d0ec44015
[2017-06-05 11:38:13.754] [DEBUG] Controller - postData { grant_type: 'authorization_code',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  code: 'cfaed409507a461014357a2d0ec44015',
  redirect_uri: 'http://localhost:3000/oadashboard/login/callback' }
[2017-06-05 11:38:13.755] [DEBUG] Controller - postHeaders { 'Content-Type': 'application/json' }
[2017-06-05 11:38:14.745] [DEBUG] Controller - after making call {"access_token":"6594345d64b192c1883353c3a36da2c4","token_type":"Bearer","expires_in":3600,"refresh_token":"e86606c9af9c2895538c51ae6ccd4812","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwOTMzLCJpYXQiOjE0OTY2NjczMzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zGwdBOWILlEZ1AHM91XuvukMnjgfqKtYIiDb76iFzdM"}
[2017-06-05 11:38:14.753] [DEBUG] AppRouter - AppRouter : req.cookie { party_id: '569',
  email: 'henry.jacob@informa.com',
  _token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwOTMzLCJpYXQiOjE0OTY2NjczMzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zGwdBOWILlEZ1AHM91XuvukMnjgfqKtYIiDb76iFzdM',
  _refresh_token: 'e86606c9af9c2895538c51ae6ccd4812' }
[2017-06-05 11:38:14.754] [DEBUG] Controller - verifyAccessToken :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwOTMzLCJpYXQiOjE0OTY2NjczMzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zGwdBOWILlEZ1AHM91XuvukMnjgfqKtYIiDb76iFzdM
[2017-06-05 11:38:14.755] [DEBUG] Controller - Controller : allowAccess
[2017-06-05 11:38:17.360] [DEBUG] AppRouter - inside user router
[2017-06-05 11:38:17.361] [DEBUG] Controller - Decode secret :  04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238
[2017-06-05 11:38:17.361] [DEBUG] Controller - token :  eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLWRldi50YXlsb3JmcmFuY2lzLmNvbS9pZGVudGl0eS8iLCJzdWIiOiI1OGZmMDJmMzMxMDIyMjEwMDA3YzJhNzciLCJhdWQiOiJkMWE5MWYwOWNjNTJkZjUwMjhmOTU3NDQyYjE3YjljOTQ0NzQ5Njg1OGVhZjAzOTYyYWFjOTAzMDFiMGQ2YjY5IiwiZXhwIjoxNDk2NjcwOTMzLCJpYXQiOjE0OTY2NjczMzMsInVzZXIiOnsiX2lkIjoiNThmZjAyZjMzMTAyMjIxMDAwN2MyYTc3IiwidXNlcm5hbWUiOiJoZW5yeS5qYWNvYkBpbmZvcm1hLmNvbSIsImZpcnN0TmFtZSI6IkhlbnJ5IEphY29iIiwibGFzdE5hbWUiOiIiLCJvcmdhbml6YXRpb24iOiJUYXlsb3IgYW5kIEZyYW5jaXMiLCJlbWFpbCI6ImhlbnJ5LmphY29iQGluZm9ybWEuY29tIiwiY3JlYXRlZE9uIjoxNDkzMTA3NDQzNTcwLCJkaXNwbGF5TmFtZSI6IkhlbnJ5IEphY29iICIsImlzVmFsaWRhdGVkIjp0cnVlLCJfX3YiOjAsImFzc29jaWF0ZWRBY2NvdW50cyI6W10sInVzZXJUeXBlIjoic2hvcHBlciJ9LCJpcCI6IiJ9.zGwdBOWILlEZ1AHM91XuvukMnjgfqKtYIiDb76iFzdM
[2017-06-05 11:38:17.365] [DEBUG] Controller - decoded: Data :  { iss: 'https://accounts-dev.taylorfrancis.com/identity/',
  sub: '58ff02f331022210007c2a77',
  aud: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  exp: 1496670933,
  iat: 1496667333,
  user: 
   { _id: '58ff02f331022210007c2a77',
     username: 'henry.jacob@informa.com',
     firstName: 'Henry Jacob',
     lastName: '',
     organization: 'Taylor and Francis',
     email: 'henry.jacob@informa.com',
     createdOn: 1493107443570,
     displayName: 'Henry Jacob ',
     isValidated: true,
     __v: 0,
     associatedAccounts: [],
     userType: 'shopper' },
  ip: '' }
[2017-06-05 13:43:46.957] [INFO] App - Customer WEB API server listening on port 3000 in %s mode
[2017-06-05 14:07:53.592] [DEBUG] AppRouter - AppRouter : req.cookie {}
[2017-06-05 14:07:53.602] [DEBUG] Controller - Controller :  x-forwarded-for , ip , connection.remoteAddress =  undefined ::ffff:172.18.0.1 ::ffff:172.18.0.1
[2017-06-05 14:07:53.602] [DEBUG] Controller - Controller : validateIP getHeaders { 'Content-Type': 'application/json',
  client_id: 'd1a91f09cc52df5028f957442b17b9c9447496858eaf03962aac90301b0d6b69',
  client_secret: '04635fdc31ce8c5c0dd4c435a4a9c73ef397056cc5a17f932d7684133fba3238',
  clientip: '38.127.198.2' } URL : https://api-dev.taylorandfrancis.com/v2/auth
[2017-06-05 14:08:05.915] [DEBUG] Controller - Controller : validateIP : Response & body  { access_type: 'allow',
  user: 
   { _id: '5842de568e110314003192cd',
     username: '38.127.198.2',
     email: 'annonymous',
     firstName: null,
     lastName: null,
     organization: '569',
     jobTitle: '',
     dob: '2017-06-06T05:02:28.097Z',
     createdOn: 1496725348097,
     isValidated: true,
     registrationVerificationToken: '',
     registrationVerificationTokenExpiry: 1496725348097,
     language: 'English',
     mobilePhone: '',
     homePhone: '',
     businessPhone: '',
     fax: '',
     address: 
      { zipCode: '',
        country: '',
        city: '',
        state: '',
        addressLine2: '',
        addressLine1: '' },
     __v: 0,
     id: '',
     organizationName: null,
     displayName: '',
     hasAcceptedTerms: false,
     ip: '38.127.198.2',
     associatedAccounts: [],
     consents: [],
     clients: [],
     accessToken: [ [Object] ],
     userType: 'ip' } }
